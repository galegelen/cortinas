<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Cortinas & Cerrajer√≠a</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<style>
:root {
  --bg:      #F5F3F0;
  --surface: #FFFFFF;
  --card:    #FFFFFF;
  --border:  #E8E4DF;

  --lav:     #9B8FBF;
  --lav-l:   #F0EDF8;
  --lav-d:   #6A5A99;

  --sage:    #7BA08A;
  --sage-l:  #EEF5F0;
  --sage-d:  #4A7A5A;

  --blush:   #D4837A;
  --blush-l: #FAF0EE;
  --blush-d: #9A3A30;

  --peach:   #D4A56A;
  --peach-l: #FEF7EE;
  --peach-d: #8A5A1A;

  --sky:     #7AAFC0;
  --sky-l:   #EDF4F8;
  --sky-d:   #2A6A88;

  --mint:    #85C49A;
  --mint-l:  #EDFAF3;
  --mint-d:  #2A7A4A;

  --text:    #2D2D3A;
  --muted:   #888899;
  --light:   #BBBBCC;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  min-height: 100vh;
  padding: 2rem;
}
.container { max-width: 1500px; margin: 0 auto; }

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
header {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;
}
.header-left h1 {
  font-size: 2rem; font-weight: 700; letter-spacing: -0.02em;
  color: var(--lav-d);
}
.header-left h1 span { color: var(--sage-d); }
.header-left p { color: var(--muted); font-size: .8rem; margin-top: .3rem; }
.header-right { display: flex; gap: .6rem; flex-wrap: wrap; }

/* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
.btn {
  display: inline-flex; align-items: center; gap: .4rem;
  padding: .55rem 1.1rem; border-radius: 10px;
  font-family: 'DM Sans', sans-serif; font-size: .78rem; font-weight: 600;
  cursor: pointer; border: none; transition: all .2s;
}
.btn-lav   { background: var(--lav);   color: #fff; }
.btn-lav:hover   { background: var(--lav-d); transform: translateY(-1px); }
.btn-sage  { background: var(--sage);  color: #fff; }
.btn-sage:hover  { background: var(--sage-d); transform: translateY(-1px); }
.btn-ghost { background: var(--surface); color: var(--text); border: 1.5px solid var(--border); }
.btn-ghost:hover { border-color: var(--lav); color: var(--lav-d); }
.btn-blush { background: var(--blush-l); color: var(--blush-d); border: 1.5px solid var(--blush); }
.btn-blush:hover { background: var(--blush); color: #fff; }

/* ‚îÄ‚îÄ KPI GRID ‚îÄ‚îÄ */
.kpi-grid {
  display: grid; grid-template-columns: repeat(6, 1fr);
  gap: .8rem; margin-bottom: 1.5rem;
}
.kpi-card {
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: 14px; padding: 1.1rem 1.2rem;
  position: relative; overflow: hidden;
  transition: transform .2s, box-shadow .2s;
}
.kpi-card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,.06); }
.kpi-card::before { content:''; position:absolute; top:0;left:0;right:0; height:3px; background: var(--kc, var(--lav)); border-radius:14px 14px 0 0; }
.kpi-label { font-size:.65rem; text-transform:uppercase; letter-spacing:.1em; color:var(--muted); margin-bottom:.5rem; font-weight:600; }
.kpi-value { font-size:2.2rem; font-weight:700; color: var(--kv, var(--lav-d)); line-height:1; font-family:'DM Mono',monospace; }
.kpi-sub { font-size:.68rem; color:var(--muted); margin-top:.3rem; }
.kpi-icon { position:absolute; top:1rem; right:1rem; font-size:1.3rem; opacity:.25; }

/* ‚îÄ‚îÄ CHARTS ROW ‚îÄ‚îÄ */
.charts-grid { display:grid; grid-template-columns: 1.2fr 1fr 1fr; gap:1rem; margin-bottom:1rem; }
.chart-card {
  background: var(--surface); border: 1.5px solid var(--border);
  border-radius: 14px; padding: 1.3rem;
}
.chart-title {
  font-size:.75rem; font-weight:700; text-transform:uppercase;
  letter-spacing:.08em; color: var(--muted); margin-bottom:1rem;
  display:flex; align-items:center; gap:.4rem;
}
.chart-title span { font-size:1rem; }

/* Bar chart */
.bar-chart { display:flex; flex-direction:column; gap:.55rem; }
.bar-row { display:grid; grid-template-columns:80px 1fr 30px; align-items:center; gap:.7rem; font-size:.7rem; }
.bar-lbl { color:var(--muted); text-align:right; font-size:.68rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-family:'DM Mono',monospace; }
.bar-track { height:16px; background:var(--bg); border-radius:6px; overflow:hidden; }
.bar-fill { height:100%; border-radius:6px; width:0; transition:width 1s cubic-bezier(.4,0,.2,1); }
.bar-num { font-weight:600; font-family:'DM Mono',monospace; font-size:.72rem; }

/* Donut chart */
.donut-wrap { display:flex; align-items:center; gap:1.2rem; }
.donut-legend { flex:1; display:flex; flex-direction:column; gap:.55rem; }
.leg-item { display:flex; align-items:center; gap:.5rem; font-size:.7rem; }
.leg-dot { width:9px; height:9px; border-radius:3px; flex-shrink:0; }
.leg-name { color:var(--muted); flex:1; font-size:.68rem; }
.leg-cnt { font-weight:600; font-family:'DM Mono',monospace; }
.leg-pct { color:var(--light); font-size:.62rem; }

/* Estado donut */
.estado-grid { display:flex; flex-direction:column; gap:.5rem; }
.estado-row {
  display:flex; align-items:center; justify-content:space-between;
  padding:.45rem .7rem; border-radius:8px; font-size:.72rem;
}
.estado-label { font-weight:500; }
.estado-cnt { font-weight:700; font-family:'DM Mono',monospace; }

/* ‚îÄ‚îÄ TABLE ‚îÄ‚îÄ */
.table-section { background:var(--surface); border:1.5px solid var(--border); border-radius:14px; overflow:hidden; margin-top:1rem; }
.table-header {
  padding:1rem 1.5rem; border-bottom:1.5px solid var(--border);
  display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:.5rem;
}
.table-title { font-size:.8rem; font-weight:700; color:var(--text); }
.filter-row { display:flex; gap:.4rem; flex-wrap:wrap; }
.filter-btn {
  background:var(--bg); border:1.5px solid var(--border); color:var(--muted);
  padding:.3rem .8rem; border-radius:20px; font-size:.65rem; font-weight:600;
  font-family:'DM Sans',monospace; cursor:pointer; transition:all .2s;
}
.filter-btn.active { background:var(--lav); border-color:var(--lav); color:#fff; }
.filter-btn:hover:not(.active) { border-color:var(--lav); color:var(--lav-d); }
.tbl-wrap { overflow-x:auto; max-height:440px; overflow-y:auto; }
table { width:100%; border-collapse:collapse; }
thead { position:sticky; top:0; z-index:5; }
th {
  padding:.65rem 1rem; text-align:left; font-size:.62rem; text-transform:uppercase;
  letter-spacing:.1em; font-weight:700; color:var(--muted);
  background:var(--bg); border-bottom:1.5px solid var(--border);
}
td {
  padding:.6rem 1rem; font-size:.72rem; border-bottom:1px solid var(--border);
  transition:background .15s; vertical-align:middle;
}
tr:hover td { background:var(--lav-l); }
tr:last-child td { border-bottom:none; }
.tag {
  display:inline-block; padding:2px 8px; border-radius:20px;
  font-size:.6rem; font-weight:600; text-transform:uppercase; letter-spacing:.05em;
}
.td-tkt { color:var(--lav-d); font-weight:600; font-family:'DM Mono',monospace; }
.td-store { font-weight:600; color:var(--text); }
.del-btn { background:none; border:none; color:var(--light); cursor:pointer; font-size:.85rem; transition:color .2s; padding:2px 6px; border-radius:4px; }
.del-btn:hover { color:var(--blush); }

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.overlay { display:none; position:fixed; inset:0; background:rgba(30,20,50,.35); backdrop-filter:blur(4px); z-index:100; align-items:center; justify-content:center; }
.overlay.open { display:flex; }
.modal {
  background:var(--surface); border:1.5px solid var(--border);
  border-radius:18px; padding:2rem; width:580px; max-width:95vw;
  max-height:90vh; overflow-y:auto;
  animation:slideUp .3s ease;
}
@keyframes slideUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
.modal-title { font-size:1.2rem; font-weight:700; color:var(--lav-d); margin-bottom:1.5rem; display:flex; justify-content:space-between; align-items:center; }
.close-btn { background:none; border:none; color:var(--light); cursor:pointer; font-size:1.2rem; transition:color .2s; }
.close-btn:hover { color:var(--text); }
.form-group { margin-bottom:1rem; }
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:.8rem; }
label { display:block; font-size:.65rem; font-weight:600; text-transform:uppercase; letter-spacing:.1em; color:var(--muted); margin-bottom:.35rem; }
input, select, textarea {
  width:100%; background:var(--bg); border:1.5px solid var(--border);
  color:var(--text); padding:.55rem .8rem; border-radius:9px;
  font-family:'DM Sans',sans-serif; font-size:.8rem; transition:border-color .2s;
}
input:focus, select:focus, textarea:focus { outline:none; border-color:var(--lav); background:var(--lav-l); }
select option { background:var(--surface); }
.form-check { display:flex; align-items:center; gap:.5rem; }
.form-check input { width:auto; }
.form-check label { margin-bottom:0; text-transform:none; letter-spacing:0; font-size:.8rem; }

.drop-zone {
  border:2px dashed var(--border); border-radius:12px; padding:2rem;
  text-align:center; cursor:pointer; transition:all .3s; margin-bottom:1rem;
}
.drop-zone:hover, .drop-zone.over { border-color:var(--lav); background:var(--lav-l); }
.drop-icon { font-size:2.2rem; margin-bottom:.6rem; }
.drop-text { font-size:.78rem; color:var(--muted); line-height:1.6; }
.drop-text strong { color:var(--text); }

.map-box { background:var(--bg); border-radius:10px; padding:1rem; margin-top:.8rem; }
.map-title { font-size:.65rem; font-weight:700; text-transform:uppercase; letter-spacing:.1em; color:var(--muted); margin-bottom:.7rem; }
.map-row { display:flex; align-items:center; gap:.7rem; margin-bottom:.5rem; font-size:.72rem; }
.map-key { color:var(--muted); width:120px; flex-shrink:0; }

.preview-box { background:var(--bg); border-radius:8px; padding:.8rem; margin-top:.8rem; max-height:160px; overflow-y:auto; }
.prev-row { display:flex; gap:.6rem; font-size:.65rem; padding:.25rem 0; border-bottom:1px solid var(--border); }
.prev-row:last-child { border:none; }
.prev-tkt { color:var(--lav-d); font-family:'DM Mono',monospace; width:80px; flex-shrink:0; }

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast { position:fixed; bottom:2rem; right:2rem; z-index:200; background:var(--mint); color:#fff; padding:.8rem 1.5rem; border-radius:10px; font-size:.78rem; font-weight:600; transform:translateY(100px); opacity:0; transition:all .3s; pointer-events:none; box-shadow:0 8px 24px rgba(0,0,0,.12); }
.toast.show { transform:translateY(0); opacity:1; }
.toast.err { background:var(--blush-d); }

/* ‚îÄ‚îÄ EMPTY ‚îÄ‚îÄ */
.empty { text-align:center; padding:3rem; color:var(--light); font-size:.8rem; }
.empty .ei { font-size:2rem; margin-bottom:.6rem; }

/* alerts strip */
.alerts-strip { display:grid; grid-template-columns:repeat(3,1fr); gap:.8rem; margin-bottom:1rem; }
.alert-card { border-radius:12px; padding:1.1rem 1.2rem; position:relative; border:1.5px solid; }
.alert-card.blush { background:var(--blush-l); border-color:#E8B0A8; }
.alert-card.peach { background:var(--peach-l); border-color:#E8C090; }
.alert-card.sky   { background:var(--sky-l);   border-color:#A0C8D8; }
.alert-label { font-size:.6rem; text-transform:uppercase; letter-spacing:.1em; font-weight:700; margin-bottom:.3rem; }
.alert-num { font-size:2rem; font-weight:700; font-family:'DM Mono',monospace; line-height:1; }
.alert-desc { font-size:.7rem; margin-top:.3rem; color:var(--muted); }

@media(max-width:900px){
  .kpi-grid{grid-template-columns:repeat(3,1fr);}
  .charts-grid{grid-template-columns:1fr;}
  .alerts-strip{grid-template-columns:1fr;}
}

/* ‚îÄ‚îÄ TABS ‚îÄ‚îÄ */
.tabs-nav {
  display: flex; gap: .4rem; padding: 0 0 1.2rem 0; border-bottom: 1.5px solid var(--border); margin-bottom: 1.5rem;
}
.tab-btn {
  background: var(--surface); border: 1.5px solid var(--border); color: var(--muted);
  padding: .55rem 1.3rem; border-radius: 10px; font-family: 'DM Sans', sans-serif;
  font-size: .8rem; font-weight: 600; cursor: pointer; transition: all .2s;
}
.tab-btn.active { background: var(--lav); border-color: var(--lav); color: #fff; }
.tab-btn:hover:not(.active) { border-color: var(--lav); color: var(--lav-d); }

/* ‚îÄ‚îÄ PROVEEDOR TAB ‚îÄ‚îÄ */
.prov-selector {
  display: flex; gap: .7rem; flex-wrap: wrap; margin-bottom: 1.5rem;
}
.prov-card {
  background: var(--surface); border: 2px solid var(--border); border-radius: 14px;
  padding: .9rem 1.3rem; cursor: pointer; transition: all .2s; min-width: 160px;
}
.prov-card:hover { border-color: var(--lav); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,.07); }
.prov-card.active { border-color: var(--lav); background: var(--lav-l); }
.prov-card-name { font-size: .8rem; font-weight: 700; color: var(--text); margin-bottom: .3rem; }
.prov-card-count { font-size: 1.6rem; font-weight: 700; font-family: 'DM Mono', monospace; color: var(--lav-d); line-height: 1; }
.prov-card-sub { font-size: .65rem; color: var(--muted); margin-top: .2rem; }

.prov-stats {
  display: grid; grid-template-columns: repeat(5, 1fr); gap: .7rem; margin-bottom: 1.3rem;
}
.prov-stat {
  background: var(--surface); border: 1.5px solid var(--border); border-radius: 12px;
  padding: .9rem 1rem; text-align: center;
}
.prov-stat-label { font-size: .6rem; text-transform: uppercase; letter-spacing: .1em; color: var(--muted); font-weight: 700; margin-bottom: .4rem; }
.prov-stat-val { font-size: 1.8rem; font-weight: 700; font-family: 'DM Mono', monospace; line-height: 1; }

.prov-table-wrap { background: var(--surface); border: 1.5px solid var(--border); border-radius: 14px; overflow: hidden; }
.prov-table-header { padding: .9rem 1.4rem; border-bottom: 1.5px solid var(--border); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: .5rem; }
.prov-table-title { font-size: .82rem; font-weight: 700; }

.estado-pills-prov { display: flex; gap: .35rem; flex-wrap: wrap; }
.epill { background: var(--bg); border: 1.5px solid var(--border); color: var(--muted); padding: .28rem .7rem; border-radius: 20px; font-size: .62rem; font-weight: 600; cursor: pointer; transition: all .18s; }
.epill.active { background: var(--sage); border-color: var(--sage); color: #fff; }
.epill:hover:not(.active) { border-color: var(--sage); color: var(--sage-d); }




</style>
</head>
<body>
<div class="container">

<header>
  <div class="header-left">
    <h1>Cortinas <span>&</span> Cerrajer√≠a</h1>
    <p>Sistema de seguimiento de tickets ¬∑ Dashboard operativo</p>
  </div>
  <div class="header-right">
    <button class="btn btn-sage" onclick="refreshFromSheets()" id="btn-refresh">‚Üª Actualizar desde Sheets</button>
    <button class="btn btn-lav" onclick="open_modal('modal-add')">‚ú¶ Agregar ticket</button>
    <button class="btn btn-ghost" onclick="open_modal('modal-import')">‚Üë Importar Excel</button>
    <button class="btn btn-ghost" onclick="exportCSV()">‚Üì Exportar CSV</button>
    <button class="btn btn-blush" onclick="clearAll()">‚úï Limpiar todo</button>
  </div>
</header>

<!-- TABS NAV -->
<div class="tabs-nav">
  <button class="tab-btn active" onclick="switchTab('dashboard',this)">üìä Dashboard</button>
  <button class="tab-btn" onclick="switchTab('proveedores',this)">üè¢ Proveedores</button>
  <button class="tab-btn" onclick="switchTab('buscar',this)">üîç Buscar tienda</button>
</div>

<!-- TAB DASHBOARD -->
<div id="tab-dashboard">

<!-- KPIs -->
<div class="kpi-grid">
  <div class="kpi-card" style="--kc:var(--lav);--kv:var(--lav-d)"><div class="kpi-icon">üìã</div><div class="kpi-label">Total Tickets</div><div class="kpi-value" id="k-total">0</div><div class="kpi-sub">registrados</div></div>
  <div class="kpi-card" style="--kc:var(--mint);--kv:var(--mint-d)"><div class="kpi-icon">‚úÖ</div><div class="kpi-label">Con Presupuesto</div><div class="kpi-value" id="k-ppto">0</div><div class="kpi-sub">aprobados</div></div>
  <div class="kpi-card" style="--kc:var(--blush);--kv:var(--blush-d)"><div class="kpi-icon">üî¥</div><div class="kpi-label">Falta Presupuesto</div><div class="kpi-value" id="k-faltappto">0</div><div class="kpi-sub">pendientes</div></div>
  <div class="kpi-card" style="--kc:var(--peach);--kv:var(--peach-d)"><div class="kpi-icon">üü†</div><div class="kpi-label">Falta Remito</div><div class="kpi-value" id="k-remito">0</div><div class="kpi-sub">pendientes</div></div>
  <div class="kpi-card" style="--kc:var(--sky);--kv:var(--sky-d)"><div class="kpi-icon">‚úì</div><div class="kpi-label">Solucionados</div><div class="kpi-value" id="k-sol">0</div><div class="kpi-sub">cerrados</div></div>
  <div class="kpi-card" style="--kc:var(--sage);--kv:var(--sage-d)"><div class="kpi-icon">üè™</div><div class="kpi-label">Tiendas afect.</div><div class="kpi-value" id="k-stores">0</div><div class="kpi-sub">con tickets</div></div>
</div>

<!-- ALERT STRIP -->
<div class="alerts-strip">
  <div class="alert-card blush">
    <div class="alert-label" style="color:var(--blush-d)">üî¥ Falta presupuesto</div>
    <div class="alert-num" id="a-faltappto" style="color:var(--blush-d)">0</div>
    <div class="alert-desc">tickets sin presupuesto enviado</div>
  </div>
  <div class="alert-card peach">
    <div class="alert-label" style="color:var(--peach-d)">üü† Falta remito</div>
    <div class="alert-num" id="a-remito" style="color:var(--peach-d)">0</div>
    <div class="alert-desc">tickets sin remito cargado</div>
  </div>
  <div class="alert-card sky">
    <div class="alert-label" style="color:var(--sky-d)">üìã Total pendientes</div>
    <div class="alert-num" id="a-pendientes" style="color:var(--sky-d)">0</div>
    <div class="alert-desc">requieren acci√≥n inmediata</div>
  </div>
</div>

<!-- CHARTS -->
<div class="charts-grid">
  <div class="chart-card">
    <div class="chart-title"><span>üè™</span> Tiendas con m√°s tickets</div>
    <div class="bar-chart" id="bar-stores"></div>
  </div>
  <div class="chart-card">
    <div class="chart-title"><span>üìÇ</span> Por categor√≠a</div>
    <div class="donut-wrap">
      <svg id="donut-cat" width="120" height="120" viewBox="0 0 120 120" style="flex-shrink:0"></svg>
      <div class="donut-legend" id="legend-cat"></div>
    </div>
  </div>
  <div class="chart-card">
    <div class="chart-title"><span>üè¢</span> Por entidad</div>
    <div class="donut-wrap">
      <svg id="donut-ent" width="120" height="120" viewBox="0 0 120 120" style="flex-shrink:0"></svg>
      <div class="donut-legend" id="legend-ent"></div>
    </div>
  </div>
</div>

<!-- Estado chart -->
<div class="chart-card" style="margin-bottom:1rem;">
  <div class="chart-title"><span>üìä</span> Estado de tickets</div>
  <div class="estado-grid" id="estado-chart"></div>
</div>

<!-- TABLE -->
<div class="table-section">
  <div class="table-header">
    <div class="table-title" id="table-count">Todos los tickets</div>
    <div class="filter-row" id="filter-row"></div>
  </div>
  <div class="tbl-wrap">
    <table>
      <thead><tr>
        <th>TKT</th><th>Tienda</th><th>Aver√≠a</th><th>Fecha</th>
        <th>Entidad</th><th>PPTO 1</th><th>PPTO 2</th><th>Notas</th><th>Estado</th><th></th>
      </tr></thead>
      <tbody id="tbl-body"></tbody>
    </table>
  </div>
</div>

</div><!-- /tab-dashboard -->

<!-- TAB PROVEEDORES -->
<div id="tab-proveedores" style="display:none">

  <!-- Selector de proveedores -->
  <div class="prov-selector" id="prov-selector"></div>

  <!-- Stats del proveedor seleccionado -->
  <div class="prov-stats" id="prov-stats" style="display:none">
    <div class="prov-stat" style="--kc:var(--lav)">
      <div class="prov-stat-label">Total tickets</div>
      <div class="prov-stat-val" id="ps-total" style="color:var(--lav-d)">0</div>
    </div>
    <div class="prov-stat">
      <div class="prov-stat-label">Con presupuesto</div>
      <div class="prov-stat-val" id="ps-ppto" style="color:var(--mint-d)">0</div>
    </div>
    <div class="prov-stat">
      <div class="prov-stat-label">Falta presupuesto</div>
      <div class="prov-stat-val" id="ps-faltappto" style="color:var(--blush-d)">0</div>
    </div>
    <div class="prov-stat">
      <div class="prov-stat-label">Falta remito</div>
      <div class="prov-stat-val" id="ps-remito" style="color:var(--peach-d)">0</div>
    </div>
    <div class="prov-stat">
      <div class="prov-stat-label">Solucionados</div>
      <div class="prov-stat-val" id="ps-sol" style="color:var(--sky-d)">0</div>
    </div>
  </div>

  <!-- Tabla de tickets del proveedor -->
  <div class="prov-table-wrap" id="prov-table-wrap" style="display:none">
    <div class="prov-table-header">
      <div class="prov-table-title" id="prov-table-title">Tickets</div>
      <div class="estado-pills-prov" id="prov-estado-pills"></div>
    </div>
    <div class="tbl-wrap">
      <table>
        <thead><tr>
          <th>TKT</th><th>Tienda</th><th>Aver√≠a</th><th>Fecha</th>
          <th>PPTO 1</th><th>PPTO 2</th><th>Notas</th><th>Estado</th>
        </tr></thead>
        <tbody id="prov-tbl-body"></tbody>
      </table>
    </div>
  </div>

</div><!-- /tab-proveedores -->

<!-- TAB BUSCAR TIENDA -->
<div id="tab-buscar" style="display:none">
  <div style="background:var(--surface);border:1.5px solid var(--border);border-radius:14px;padding:2rem;max-width:500px;margin:0 auto;text-align:center;">
    <div style="font-size:2rem;margin-bottom:.8rem;">üè™</div>
    <div style="font-size:1.1rem;font-weight:700;color:var(--lav-d);margin-bottom:.4rem;">Buscar por tienda</div>
    <div style="font-size:.78rem;color:var(--muted);margin-bottom:1.5rem;">Ingres√° el n√∫mero de tienda para ver todos sus tickets</div>
    <div style="position:relative;margin-bottom:1rem;">
      <span style="position:absolute;left:.9rem;top:50%;transform:translateY(-50%);font-size:1rem;pointer-events:none;">üîç</span>
      <input id="s-tienda" placeholder="ej: 194, 5606, 1086‚Ä¶" oninput="buscarTienda()"
        style="width:100%;padding:.7rem 1rem .7rem 2.5rem;border-radius:12px;border:2px solid var(--border);background:var(--bg);font-family:'DM Mono',monospace;font-size:1rem;color:var(--text);transition:border-color .2s;text-align:center;letter-spacing:.05em;"
        onfocus="this.style.borderColor='var(--lav)'" onblur="this.style.borderColor='var(--border)'">
    </div>
    <div id="buscar-result" style="font-size:.75rem;color:var(--muted);min-height:1.2rem;font-family:'DM Mono',monospace;"></div>
  </div>
  <div class="table-section" id="buscar-table" style="margin-top:1rem;display:none">
    <div class="table-header">
      <div class="table-title" id="buscar-count">‚Äî</div>
    </div>
    <div class="tbl-wrap">
      <table>
        <thead><tr>
          <th>TKT</th><th>Aver√≠a</th><th>Fecha</th><th>Entidad</th><th>PPTO 1</th><th>PPTO 2</th><th>Notas</th><th>Estado</th>
        </tr></thead>
        <tbody id="buscar-body"></tbody>
      </table>
    </div>
  </div>
</div>

</div><!-- /container -->

<!-- MODAL ADD -->
<div class="overlay" id="modal-add">
  <div class="modal">
    <div class="modal-title">Agregar ticket <button class="close-btn" onclick="close_modal('modal-add')">‚úï</button></div>
    <div class="form-row">
      <div class="form-group"><label>TKT *</label><input id="f-tkt" placeholder="6000000"></div>
      <div class="form-group"><label>Tienda *</label><input id="f-store" type="number" placeholder="1234"></div>
    </div>
    <div class="form-group"><label>Aver√≠a / Categor√≠a *</label>
      <select id="f-cat">
        <option>Cortina Que Impida La Apertura O Cierre</option>
        <option>Cerradura Trabada / Puerta De Ingreso</option>
        <option>Cortina Lateral</option>
        <option>Cambio De Cerradura De Tienda</option>
        <option>Reparaci√≥n Cortina Dep√≥sito</option>
        <option>Cortinas Mal Uso</option>
        <option>Cerrajer√≠a</option>
        <option>Cdg</option>
        <option>Otro</option>
      </select>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Fecha</label><input id="f-fecha" type="date"></div>
      <div class="form-group"><label>Entidad externa</label>
        <select id="f-ent">
          <option>Croacia Cortinas</option><option>Cortinas Cv</option>
          <option>Prs</option><option>Ilit</option><option>Tecnico Interno</option><option>-</option>
        </select>
      </div>
    </div>
    <div class="form-group"><label>Asunto</label><input id="f-asunto" placeholder="T1234 - descripci√≥n del problema"></div>
    <div class="form-row">
      <div class="form-group"><label>PPTO 1</label><input id="f-ppto1" placeholder="$1.000.000"></div>
      <div class="form-group"><label>PPTO 2</label><input id="f-ppto2" placeholder="-"></div>
    </div>
    <div class="form-group"><label>Notas</label>
      <select id="f-notas">
        <option value="1 presupuesto">1 presupuesto</option>
        <option value="2 presupuestos">2 presupuestos</option>
        <option value="falta remito">falta remito</option>
        <option value="falta presupuesto">falta presupuesto</option>
        <option value="solucionado">solucionado</option>
        <option value="En proceso">En proceso</option>
        <option value="">Sin nota</option>
      </select>
    </div>
    <div style="display:flex;gap:.7rem;margin-top:1.5rem;">
      <button class="btn btn-lav" style="flex:1" onclick="addTicket()">Agregar ticket</button>
      <button class="btn btn-ghost" onclick="close_modal('modal-add')">Cancelar</button>
    </div>
  </div>
</div>

<!-- MODAL IMPORT -->
<div class="overlay" id="modal-import">
  <div class="modal">
    <div class="modal-title">Importar Excel <button class="close-btn" onclick="close_modal('modal-import')">‚úï</button></div>
    <div class="drop-zone" id="dz" onclick="document.getElementById('fi').click()">
      <input type="file" id="fi" accept=".xlsx,.xls,.csv" style="display:none" onchange="handleFile(this.files[0])">
      <div class="drop-icon">üìÇ</div>
      <div class="drop-text">
        <strong>Clic o arrastr√° tu archivo ac√°</strong><br>
        .xlsx, .xls o .csv<br>
        <span style="font-size:.65rem">Columnas: Tienda, TKT, Aver√≠a, Fecha_Solicitud, Asunto, Entidades externas, 1 ppto, 2 ppto, Notas</span>
      </div>
    </div>
    <div id="import-body" style="display:none">
      <div class="map-box">
        <div class="map-title">Asign√° las columnas</div>
        <div id="map-fields"></div>
      </div>
      <div class="preview-box" id="import-preview"></div>
      <div style="display:flex;gap:.7rem;margin-top:1rem;">
        <button class="btn btn-sage" style="flex:1" onclick="confirmImport()">‚úÖ Importar</button>
        <button class="btn btn-ghost" onclick="resetImport()">Cancelar</button>
      </div>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const COLORS = ['#9B8FBF','#7BA08A','#D4837A','#D4A56A','#7AAFC0','#85C49A','#C4A0C8','#A8B870'];
const ESTADO_STYLES = {
  'Con Presupuesto':   {bg:'#EDFAF3',color:'#2A7A4A',border:'#85C49A'},
  'Falta Remito':      {bg:'#FEF7EE',color:'#8A5A1A',border:'#D4A56A'},
  'Falta Presupuesto': {bg:'#FAF0EE',color:'#9A3A30',border:'#D4837A'},
  'Solucionado':       {bg:'#EDF4F8',color:'#2A6A88',border:'#7AAFC0'},
  'En Proceso':        {bg:'#F0EDF8',color:'#6A5A99',border:'#9B8FBF'},
  'Sin Definir':       {bg:'#F5F5F8',color:'#555577',border:'#AAAACC'},
};

function calcEstado(t) {
  const n = (t.notas||'').toLowerCase();
  const a = (t.asunto||'').toLowerCase();
  const p1ok = t.ppto1 && t.ppto1 !== '-' && t.ppto1 !== '';
  const p2ok = t.ppto2 && t.ppto2 !== '-' && t.ppto2 !== '';
  const hasPpto = p1ok || p2ok;
  if (/solucionado|rechazado/.test(n)) return 'Solucionado';
  if (/falta remito/.test(n)) return 'Falta Remito';
  if (/falta presupuesto/.test(n) || (/ppto/.test(a) && !hasPpto && !/solucionado/.test(n))) return 'Falta Presupuesto';
  if (hasPpto) return 'Con Presupuesto';
  if (/proceso|pendiente/.test(n)) return 'En Proceso';
  return 'Sin Definir';
}

let tickets = [];
let importedRaw = [], importedCols = [];
let currentFilter = 'all';

function loadData() {
  try {
    const saved = localStorage.getItem('cortinas_v2');
    if (saved) { tickets = JSON.parse(saved); return; }
  } catch(e) {}
  tickets = INITIAL_DATA.map(t => ({...t, estado: calcEstado(t)}));
  save();
}
function save() {
  try { localStorage.setItem('cortinas_v2', JSON.stringify(tickets)); } catch(e) {}
}

// ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function open_modal(id) {
  document.getElementById(id).classList.add('open');
  if (id==='modal-add') document.getElementById('f-fecha').value = new Date().toISOString().slice(0,10);
}
function close_modal(id) { document.getElementById(id).classList.remove('open'); }
document.querySelectorAll('.overlay').forEach(o => o.addEventListener('click', e => { if(e.target===o) o.classList.remove('open'); }));

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toast(msg, err=false) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.className = 'toast'+(err?' err':'')+' show';
  setTimeout(()=>t.className='toast', 3200);
}

// ‚îÄ‚îÄ ADD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function addTicket() {
  const tkt   = document.getElementById('f-tkt').value.trim();
  const store = document.getElementById('f-store').value.trim();
  if (!tkt || !store) { toast('Complet√° TKT y Tienda', true); return; }
  if (tickets.find(t=>t.tkt===tkt)) { toast('Ya existe ese TKT', true); return; }
  const notas = document.getElementById('f-notas').value;
  const ppto1 = document.getElementById('f-ppto1').value || '-';
  const ppto2 = document.getElementById('f-ppto2').value || '-';
  const t = {
    tkt, tienda: store,
    averia: document.getElementById('f-cat').value,
    fecha:  document.getElementById('f-fecha').value,
    asunto: document.getElementById('f-asunto').value,
    entidad: document.getElementById('f-ent').value,
    ppto1, ppto2, notas,
  };
  t.estado = calcEstado(t);
  tickets.unshift(t);
  save(); render(); close_modal('modal-add');
  ['f-tkt','f-store','f-asunto','f-ppto1','f-ppto2'].forEach(id=>document.getElementById(id).value='');
  toast('‚úÖ Ticket agregado');
}

// ‚îÄ‚îÄ DELETE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function delTicket(tkt) {
  if (!confirm(`¬øElimin√°s el ticket #${tkt}?`)) return;
  tickets = tickets.filter(t=>t.tkt!==tkt);
  save(); render(); toast('üóë Ticket eliminado');
}
function clearAll() {
  if (!confirm('¬øElimin√°s TODOS los tickets?')) return;
  tickets = []; save(); render(); toast('Limpiado');
}

// ‚îÄ‚îÄ EXPORT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function exportCSV() {
  const rows=[['TKT','Tienda','Aver√≠a','Fecha','Asunto','Entidad','PPTO 1','PPTO 2','Notas','Estado']];
  tickets.forEach(t=>rows.push([t.tkt,t.tienda,t.averia,t.fecha,t.asunto,t.entidad,t.ppto1,t.ppto2,t.notas,t.estado]));
  const csv=rows.map(r=>r.map(v=>`"${String(v||'').replace(/"/g,'""')}"`).join(',')).join('\n');
  const a=document.createElement('a');
  a.href='data:text/csv;charset=utf-8,\uFEFF'+encodeURIComponent(csv);
  a.download=`cortinas_${new Date().toISOString().slice(0,10)}.csv`;
  a.click(); toast('üì• CSV descargado');
}

// ‚îÄ‚îÄ IMPORT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const dz = document.getElementById('dz');
dz.addEventListener('dragover',e=>{e.preventDefault();dz.classList.add('over');});
dz.addEventListener('dragleave',()=>dz.classList.remove('over'));
dz.addEventListener('drop',e=>{e.preventDefault();dz.classList.remove('over');handleFile(e.dataTransfer.files[0]);});

function handleFile(file) {
  if (!file) return;
  const reader = new FileReader();
  reader.onload = e => {
    try {
      const wb = XLSX.read(e.target.result, {type:'binary'});
      const ws = wb.Sheets[wb.SheetNames[0]];
      const data = XLSX.utils.sheet_to_json(ws, {defval:''});
      if (!data.length) { toast('Archivo vac√≠o', true); return; }
      importedRaw = data; importedCols = Object.keys(data[0]);
      const find = ps => importedCols.find(c=>ps.some(p=>c.toLowerCase().includes(p.toLowerCase())))||'';
      const mapping = {
        tkt:     find(['TKT','ticket','numero']),
        tienda:  find(['tienda','store','local']),
        averia:  find(['aver√≠a','averia','categoria','tipo']),
        fecha:   find(['fecha','date']),
        asunto:  find(['asunto','subject','descripcion']),
        entidad: find(['entidad','entity','proveedor']),
        ppto1:   find(['1 ppto','ppto1','presup']),
        ppto2:   find(['2 ppto','ppto2']),
        notas:   find(['notas','notes','estado','status']),
      };
      const labels={tkt:'TKT *',tienda:'Tienda *',averia:'Aver√≠a',fecha:'Fecha',asunto:'Asunto',entidad:'Entidad',ppto1:'PPTO 1',ppto2:'PPTO 2',notas:'Notas'};
      document.getElementById('map-fields').innerHTML = Object.entries(mapping).map(([k,v])=>`
        <div class="map-row">
          <span class="map-key">${labels[k]}</span>
          <select id="mp-${k}" style="flex:1">
            <option value="">-- sin asignar --</option>
            ${importedCols.map(c=>`<option value="${c}"${c===v?' selected':''}>${c}</option>`).join('')}
          </select>
        </div>`).join('');
      document.getElementById('import-preview').innerHTML =
        `<div style="font-size:.62rem;color:var(--muted);margin-bottom:.4rem">${data.length} filas ‚Äî vista previa:</div>`+
        data.slice(0,5).map(row=>`<div class="prev-row">
          <span class="prev-tkt">${row[mapping.tkt]||'‚Äî'}</span>
          <span style="color:var(--muted);width:60px;flex-shrink:0">T${row[mapping.tienda]||'?'}</span>
          <span style="flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--muted)">${row[mapping.asunto]||''}</span>
        </div>`).join('');
      document.getElementById('import-body').style.display='block';
    } catch(err) { toast('Error al leer el archivo', true); }
  };
  reader.readAsBinaryString(file);
}

function confirmImport() {
  const g = k => document.getElementById(`mp-${k}`)?.value||'';
  const mTkt=g('tkt'), mTienda=g('tienda');
  if (!mTkt||!mTienda) { toast('Asign√° TKT y Tienda', true); return; }
  const mAv=g('averia'),mFecha=g('fecha'),mAs=g('asunto'),mEnt=g('entidad'),mP1=g('ppto1'),mP2=g('ppto2'),mN=g('notas');
  const existing = new Set(tickets.map(t=>t.tkt));
  const added = importedRaw.map(row=>{
    const rawDate = row[mFecha]||'';
    let fecha = '';
    if (rawDate) {
      if (typeof rawDate==='number') {
        const d=new Date(Math.round((rawDate-25569)*86400*1000));
        fecha=d.toISOString().slice(0,10);
      } else { fecha=String(rawDate); }
    }
    const t = {
      tkt:    String(row[mTkt]||'').trim(),
      tienda: String(row[mTienda]||'').trim(),
      averia: String(row[mAv]||'Otro'),
      fecha, asunto: String(row[mAs]||''),
      entidad: String(row[mEnt]||'-'),
      ppto1: String(row[mP1]||'-'),
      ppto2: String(row[mP2]||'-'),
      notas: String(row[mN]||''),
    };
    t.estado = calcEstado(t);
    return t;
  }).filter(t=>t.tkt && !existing.has(t.tkt));
  tickets = [...added, ...tickets];
  save(); render(); close_modal('modal-import'); resetImport();
  toast(`‚úÖ ${added.length} tickets importados`);
}
function resetImport() {
  importedRaw=[]; importedCols=[];
  document.getElementById('import-body').style.display='none';
  document.getElementById('fi').value='';
}

// ‚îÄ‚îÄ FILTER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setFilter(f, btn) {
  currentFilter=f;
  document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  renderTable();
}

// ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function counter(arr, key) {
  const m={}; arr.forEach(t=>{ m[t[key]]=(m[t[key]]||0)+1; }); return m;
}
function sorted(obj) { return Object.entries(obj).sort((a,b)=>b[1]-a[1]); }

function render() {
  const T = tickets.length;
  const ec = counter(tickets,'estado');
  const tc = counter(tickets,'tienda');
  const cc = counter(tickets,'averia');
  const oc = counter(tickets,'entidad');

  // KPIs
  document.getElementById('k-total').textContent    = T;
  document.getElementById('k-ppto').textContent     = ec['Con Presupuesto']||0;
  document.getElementById('k-faltappto').textContent= ec['Falta Presupuesto']||0;
  document.getElementById('k-remito').textContent   = ec['Falta Remito']||0;
  document.getElementById('k-sol').textContent      = ec['Solucionado']||0;
  document.getElementById('k-stores').textContent   = Object.keys(tc).length;

  // Alerts
  const fp = ec['Falta Presupuesto']||0;
  const fr = ec['Falta Remito']||0;
  document.getElementById('a-faltappto').textContent = fp;
  document.getElementById('a-remito').textContent    = fr;
  document.getElementById('a-pendientes').textContent= fp+fr;

  // Bar chart ‚Äî tiendas
  const topT = sorted(tc).slice(0,10);
  const maxT = topT[0]?.[1]||1;
  const barEl = document.getElementById('bar-stores');
  barEl.innerHTML = topT.map(([s,c])=>`
    <div class="bar-row">
      <div class="bar-lbl">T${s}</div>
      <div class="bar-track"><div class="bar-fill" style="background:var(--lav)" data-w="${c/maxT*100}"></div></div>
      <div class="bar-num" style="color:var(--lav-d)">${c}</div>
    </div>`).join('');
  setTimeout(()=>barEl.querySelectorAll('.bar-fill').forEach(b=>b.style.width=b.dataset.w+'%'),80);

  // Donuts
  renderDonut('donut-cat','legend-cat', sorted(cc), T);
  renderDonut('donut-ent','legend-ent', sorted(oc), T);

  // Estado chart
  const estOrd = ['Con Presupuesto','Solucionado','Falta Remito','Falta Presupuesto','En Proceso','Sin Definir'];
  const maxE = Math.max(...estOrd.map(e=>ec[e]||0),1);
  document.getElementById('estado-chart').innerHTML = estOrd.map(e=>{
    const cnt = ec[e]||0;
    const s = ESTADO_STYLES[e]||{bg:'#F5F5F8',color:'#555577',border:'#AAAACC'};
    const pct = T ? Math.round(cnt/T*100) : 0;
    return `<div class="estado-row" style="background:${s.bg};border:1.5px solid ${s.border}">
      <span class="estado-label" style="color:${s.color}">${e}</span>
      <div style="flex:1;margin:0 1rem;">
        <div style="height:8px;background:rgba(0,0,0,.06);border-radius:4px;overflow:hidden">
          <div style="height:100%;background:${s.border};border-radius:4px;width:0;transition:width 1s ease" data-w="${cnt/maxE*100}"></div>
        </div>
      </div>
      <span class="estado-cnt" style="color:${s.color}">${cnt}</span>
      <span style="color:${s.border};font-size:.65rem;margin-left:.5rem;font-family:'DM Mono',monospace">${pct}%</span>
    </div>`;
  }).join('');
  setTimeout(()=>document.querySelectorAll('#estado-chart [data-w]').forEach(b=>b.style.width=b.dataset.w+'%'),80);

  // Filters
  const filterDefs = [
    ['all','Todos'],
    ['Con Presupuesto','Con PPTO'],
    ['Falta Presupuesto','Falta PPTO'],
    ['Falta Remito','Falta Remito'],
    ['Solucionado','Solucionado'],
    ['Sin Definir','Sin estado'],
  ];
  document.getElementById('filter-row').innerHTML = filterDefs.map(([f,label])=>{
    const cnt = f==='all' ? T : ec[f]||0;
    return `<button class="filter-btn${currentFilter===f?' active':''}" onclick="setFilter('${f}',this)">${label} (${cnt})</button>`;
  }).join('');

  renderTable();
}

function renderDonut(svgId, legId, entries, total) {
  const R=44, cx=60, cy=60, circ=2*Math.PI*R;
  const svg = document.getElementById(svgId);
  let html = `<circle cx="${cx}" cy="${cy}" r="${R}" fill="none" stroke="#F0EDEA" stroke-width="18"/>`;
  let offset = 0;
  entries.slice(0,6).forEach(([label,cnt],i)=>{
    const arc = (cnt/total)*circ;
    const dash = `${arc} ${circ}`;
    const rot = (offset/circ)*360 - 90;
    html += `<circle cx="${cx}" cy="${cy}" r="${R}" fill="none" stroke="${COLORS[i%COLORS.length]}" stroke-width="18" stroke-dasharray="${dash}" stroke-dashoffset="0" transform="rotate(${rot} ${cx} ${cy})" style="transition:stroke-dasharray 1.2s ease"/>`;
    offset += arc;
  });
  html += `<text x="${cx}" y="${cy+4}" text-anchor="middle" font-family="DM Mono" font-size="14" font-weight="700" fill="#2D2D3A">${total}</text>`;
  svg.innerHTML = html;
  document.getElementById(legId).innerHTML = entries.slice(0,6).map(([label,cnt],i)=>`
    <div class="leg-item">
      <div class="leg-dot" style="background:${COLORS[i%COLORS.length]}"></div>
      <span class="leg-name">${label.length>22?label.slice(0,22)+'‚Ä¶':label}</span>
      <span class="leg-cnt" style="color:${COLORS[i%COLORS.length]}">${cnt}</span>
      <span class="leg-pct">${total?Math.round(cnt/total*100):0}%</span>
    </div>`).join('');
}

function renderTable() {
  const filtered = currentFilter==='all' ? tickets : tickets.filter(t=>t.estado===currentFilter);
  document.getElementById('table-count').textContent = `${filtered.length} ticket${filtered.length!==1?'s':''} ‚Äî ${currentFilter==='all'?'todos':currentFilter}`;
  const tbody = document.getElementById('tbl-body');
  if (!filtered.length) { tbody.innerHTML=`<tr><td colspan="10"><div class="empty"><div class="ei">üìã</div>Sin tickets en esta categor√≠a</div></td></tr>`; return; }
  const s = ESTADO_STYLES;
  tbody.innerHTML = filtered.map(t=>{
    const es = s[t.estado]||s['Sin Definir'];
    return `<tr>
      <td class="td-tkt"><a href="https://dia.cloud.invgate.net/requests/show/index/id/${t.tkt}" target="_blank" style="color:var(--lav-d);text-decoration:none;font-weight:600;font-family:'DM Mono',monospace" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">#${t.tkt}</a></td>
      <td class="td-store">T${t.tienda}</td>
      <td style="max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:.68rem;color:var(--muted)" title="${t.averia}">${t.averia}</td>
      <td style="color:var(--muted);white-space:nowrap;font-size:.68rem">${t.fecha}</td>
      <td style="font-size:.7rem">${t.entidad}</td>
      <td style="font-size:.68rem;font-family:'DM Mono',monospace;color:var(--sage-d)">${t.ppto1||'-'}</td>
      <td style="font-size:.68rem;font-family:'DM Mono',monospace;color:var(--sage-d)">${t.ppto2||'-'}</td>
      <td style="font-size:.68rem;color:var(--muted)">${t.notas||'-'}</td>
      <td><span class="tag" style="background:${es.bg};color:${es.color};border:1px solid ${es.border}">${t.estado}</span></td>
      <td><button class="del-btn" onclick="delTicket('${t.tkt}')" title="Eliminar">‚úï</button></td>
    </tr>`;
  }).join('');
}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
</script>
<script>
// Data injected below
const INITIAL_DATA = [{"tienda": "5606", "tkt": "6149882", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "16 nov 2025", "asunto": "5606 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - CROACIA- ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$663.600", "ppto2": "-", "notas": "Pendiente", "estado": "Con Presupuesto"}, {"tienda": "5601", "tkt": "6090444", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "2 oct 2025", "asunto": "T5601 -  CORTINA AVERIADA NO BAJA - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.584.268", "ppto2": "$2.182.800", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "5572", "tkt": "6070285", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "18 sept 2025", "asunto": "T5572 REVISION DE CORTINA DE INGRESO - CV CORTINAS - PPTO PENDIENTE", "entidad": "Cortinas Cv", "ppto1": "$220.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5561", "tkt": "6194410", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "23 dic 2025", "asunto": "T5561 - Se solicita mantenimiento para puerta de persiana met√°lica - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5561", "tkt": "6160211", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "25 nov 2025", "asunto": "T5561 - Cortina met√°lica desoldada - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$786,500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5545", "tkt": "6150076", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "16 nov 2025", "asunto": "T5545 - NO FUNCIONA LA BOTONERA DE SUBIR LA CORTINA - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$1.255.846,00", "ppto2": "-", "notas": "En proceso", "estado": "Con Presupuesto"}, {"tienda": "5543", "tkt": "6253108", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "11 feb 2026", "asunto": "T5543 - Puerta de escape trabada - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5539", "tkt": "6207931", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 ene 2026", "asunto": "T5539 - PUERTA DE ESCAPE NO CIERRA BIEN - CV CORTINAS - falta ppto", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "5499", "tkt": "6026031", "averia": "Cortina Lateral", "fecha": "17 ago 2025", "asunto": "T5499 mmto cortina lateral- CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.255.900", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5485", "tkt": "6251131", "averia": "Cortinas Mal Uso", "fecha": "9 feb 2026", "asunto": "T5485 - Relevamiento de cortina por MAL USO - Croacia", "entidad": "Croacia Cortinas", "ppto1": "$4.904.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5485", "tkt": "6216023", "averia": "Cortinas Mal Uso", "fecha": "12 ene 2026", "asunto": "T5485 - Persiana de ingreso rota - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$9.791.746,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5478", "tkt": "6067092", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "15 sept 2025", "asunto": "T5478 - reparaci√≥n urgente de la cerradura de la puerta corrediza de entrada- ILIT - falta remito", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5477", "tkt": "6050286", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "3 sept 2025", "asunto": "T5477 - Cortina de ingreso no baja, trabada - cv cortinas - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$850.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5475", "tkt": "6202980", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "1 ene 2026", "asunto": "5475 - Puerta de escape rota la oreja de traba - Croacia - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$877.900", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5461", "tkt": "6078223", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "23 sept 2025", "asunto": "T5461 - Se desoldo la cortina de entrada - CROACIA - PPTO PENDIENTE", "entidad": "Cortinas Cv", "ppto1": "$1.759.320", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5461", "tkt": "6077364", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "23 sept 2025", "asunto": "T5461 - Se desoldo la cortina de entrada - cv cortinas - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.750.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5453", "tkt": "6203504", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "2 ene 2026", "asunto": "T5453 - Colocar cerradura - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "5449", "tkt": "6036286", "averia": "Cortina Lateral", "fecha": "24 ago 2025", "asunto": "T5449 Cortina no baja -  CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.150.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5447", "tkt": "6244753", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "4 feb 2026", "asunto": "T5447 - Puerta escape llave trabada - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "5439", "tkt": "6248643", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "7 feb 2026", "asunto": "T5439 - puerta de escape se traba - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "5423", "tkt": "6105356", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "13 oct 2025", "asunto": "5423 - Se solicita asistencia por cortina atascada al bajar - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$956.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5422", "tkt": "6252538", "averia": "Cortina Lateral", "fecha": "11 feb 2026", "asunto": "t5422 Cortina lateral no funciona - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "$786.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5421", "tkt": "6183116", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "12 dic 2025", "asunto": "T5421  - Persiana sin agarre al piso, se solicita alargar la cortina - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "    $847.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5413", "tkt": "6227752", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "20 ene 2026", "asunto": "T5413 Mal cierre de cortinas - CV CORTINAS", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5406", "tkt": "6251789", "averia": "Cambio De Cerradura De Tienda", "fecha": "10 feb 2026", "asunto": "T5406 - arreglo de CERRADURA DE CORTINA met√°lica - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "5397", "tkt": "6226942", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "20 ene 2026", "asunto": "T5397 CORTINA PRINCIPAL DESVIADA - CV CORTINAS  -PPTO PENDIENTE", "entidad": "Cortinas Cv", "ppto1": "1391500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5396", "tkt": "6227714", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "20 ene 2026", "asunto": "T5396 CORTINA DE DEPOSITO SE SALIO DE EJE - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "943900", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5386", "tkt": "6195700", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "24 dic 2025", "asunto": "t5386 - Se salio un remache que mantiene fija la cerradura en la puerta. - ilit", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5386", "tkt": "6229537", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "22 ene 2026", "asunto": "t5386 - Se salio un remache que mantiene fija la cerradura en la puerta corrediza - pendiente", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "pendiente", "estado": "En Proceso"}, {"tienda": "5386", "tkt": "6229526", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "22 ene 2026", "asunto": "t5386 Puerta de escape caida del marco, ajustar manualmente - pendiente", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "", "estado": "Sin Definir"}, {"tienda": "5374", "tkt": "6221130", "averia": "Cdg", "fecha": "15 ene 2026", "asunto": "T5374 - Cambio de cerradura por cambio de gestion - Ilit", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "5366", "tkt": "6251329", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "10 feb 2026", "asunto": "t5366 cortina de ingreso trabada a la mitad - croacia", "entidad": "Croacia Cortinas", "ppto1": "$885.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5363", "tkt": "6230687", "averia": "Cortinas Mal Uso", "fecha": "23 ene 2026", "asunto": "T5363 - Cortina se traba al subir, subieron la puerta puesta - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.485.400", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5343", "tkt": "6092193", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "4 oct 2025", "asunto": "T5343 -  Cortina trabada - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.750.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5340", "tkt": "6196196", "averia": "Cortina Lateral", "fecha": "26 dic 2025", "asunto": "T5340 - Cortina Lateral imposible de abrir - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$2.078.800", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5340", "tkt": "6125209", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "27 oct 2025", "asunto": "T5340 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "5321", "tkt": "6031021", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "20 ago 2025", "asunto": "T5321 Cortina de entrada rajada al medio - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$1.098.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5285", "tkt": "6246094", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 feb 2026", "asunto": "T5285 - CORTINA EN CORTO - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "5285", "tkt": "6224006", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "18 ene 2026", "asunto": "T5285 - cerradura de puerta de ingreso no abre -  CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5266", "tkt": "6157122", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "21 nov 2025", "asunto": "T5266 CORTINA EN MAL FUNCIONAMIENTO -  CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "$1.984.400", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5266", "tkt": "6182461", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "11 dic 2025", "asunto": "T5266 - Cortina trabada - CV Cortinas - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$2.117.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5244", "tkt": "6162614", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "26 nov 2025", "asunto": "T5244 No baja la cortina de entrada - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5244", "tkt": "6162320", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "26 nov 2025", "asunto": "T5244 - No baja a la cortina - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.391.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5234", "tkt": "6100127", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "9 oct 2025", "asunto": "T5234 - Persiana de entrada no sube - CV Cortinas - falta remito", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5217", "tkt": "6054038", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "5 sept 2025", "asunto": "t5217 CORTINA DE DEPOSITO NO BAJA . cv cortinas - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$550.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5217", "tkt": "6129567", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "30 oct 2025", "asunto": "T5217 CORTINA ENTRADA NO BAJA - CV CORTINAS  - PPTO PENDIENTE", "entidad": "Cortinas Cv", "ppto1": "1350000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5217", "tkt": "6247737", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "6 feb 2026", "asunto": "T5217 - CORTINA DE DEP√ìSITO NO BAJA - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "$1.145.265,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5163", "tkt": "6197649", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "27 dic 2025", "asunto": "5163 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - CROACIA - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$885.500", "ppto2": "$1.428.430", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "5157", "tkt": "6208390", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "6 ene 2026", "asunto": "T5157 - persiana rota - CV CORTINAS - falta ppto", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "5136", "tkt": "6102232", "averia": "Cortina Lateral", "fecha": "11 oct 2025", "asunto": "T5136 - Cortina ventanal caida - CROACIA - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$569.480", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5136", "tkt": "6248511", "averia": "Cortinas Mal Uso", "fecha": "7 feb 2026", "asunto": "T5136 - CORTINA METALICA DE DEPOSITO ROTA - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "5132", "tkt": "6164132", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "28 nov 2025", "asunto": "T5132 - Al bajar la cortina se trab√≥ de un lado y bajo torcida - CROACIA - ppto pendiente por zocalo", "entidad": "Croacia Cortinas", "ppto1": "$656.00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5131", "tkt": "6202168", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "31 dic 2025", "asunto": "T5131 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - CROACIA - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$445.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5115", "tkt": "6175597", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "6 dic 2025", "asunto": "T5115  CERRADURA TRABADA PUERTA DE INGRESO - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "1538", "tkt": "6215968", "averia": "Cortina Lateral", "fecha": "11 ene 2026", "asunto": "T1538 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$755.846,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1534", "tkt": "6181916", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "11 dic 2025", "asunto": "T1534 CORTINA DE INGRESO  - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.183.300", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1534", "tkt": "6183458", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "12 dic 2025", "asunto": "1534 - SE SOLICITA ASISTENCIA CORTINA AVERIADA - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.071.300", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1526", "tkt": "5968392", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "9 jul 2025", "asunto": "T 1526 - Cortina deposito - Croacia - pendiente ppto", "entidad": "Croacia Cortinas", "ppto1": "$ 4.066.382", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1526", "tkt": "6206519", "averia": "Cortina Lateral", "fecha": "5 ene 2026", "asunto": "T1526 - Persiana lateral en vez de subir baja y se traba - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$4.887.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1525", "tkt": "6163849", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "27 nov 2025", "asunto": "T1525 Bajar cortina por falta de suministro - CV CORTINAS", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "1521", "tkt": "6246742", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 feb 2026", "asunto": "T1521 EXPLOTO EL MOTOR DE LA CORTINA  - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "Solucionado", "estado": "Solucionado"}, {"tienda": "1518", "tkt": "6234678", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "27 ene 2026", "asunto": "T1518 - Cortina de entrada (baja con dificultad) - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "Solucionado", "estado": "Solucionado"}, {"tienda": "1513", "tkt": "6055915", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "7 sept 2025", "asunto": "T1513 - Varilla de cortina rota  - ft net - pendiente ppto", "entidad": "Cortinas Cv", "ppto1": "$692,645.00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1513", "tkt": "6054399", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 sept 2025", "asunto": "T1513 - Varilla de cortina rota  - CV Cortinas - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$3.000.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1513", "tkt": "6196315", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "26 dic 2025", "asunto": "T1513 - Partes desoldadas de la cortina - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "1506", "tkt": "6253351", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "11 feb 2026", "asunto": "Puerta de ingreso de  vidrio corrediza. - se pide info", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "rechazado", "estado": "Solucionado"}, {"tienda": "1505", "tkt": "6248746", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "7 feb 2026", "asunto": "T1505 - cerradura puerta escape forzada - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "Solucionado", "estado": "Solucionado"}, {"tienda": "1503", "tkt": "6239513", "averia": "Cortina Lateral", "fecha": "31 ene 2026", "asunto": "T1503 - cortina lateral no funciona - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "1502", "tkt": "6246736", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "5 feb 2026", "asunto": "T1502 - SE DESCALZO EL RIEL DE LA PUERTA - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "1501", "tkt": "6154027", "averia": "Cortina Lateral", "fecha": "19 nov 2025", "asunto": "T1501 - Cortina lateral del frente baja y sube cruzada - CV CORTNAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "1100", "tkt": "6139015", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "7 nov 2025", "asunto": "T1100 cortina de la entrada del deposito se encuentra trabada  - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$867.268,50", "ppto2": "-", "notas": "1 presupuesto ", "estado": "Con Presupuesto"}, {"tienda": "1098", "tkt": "6212529", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "9 ene 2026", "asunto": "1098 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$2.115.471,00", "ppto2": "-", "notas": "1 presupuesto ", "estado": "Con Presupuesto"}, {"tienda": "1086", "tkt": "6251450", "averia": "Cortina Lateral", "fecha": "10 feb 2026", "asunto": "t1086 - cortinas laterales no levantan - se pide inf", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "1086", "tkt": "6252108", "averia": "Cortina Lateral", "fecha": "10 feb 2026", "asunto": "T1086 - PERSIANA DEL LADO DERECHO SE CAYO - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "1086", "tkt": "6248003", "averia": "Cortinas Mal Uso", "fecha": "6 feb 2026", "asunto": "T1086 - persiana de deposito rota, por mal uso - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "1068", "tkt": "6102415", "averia": "Cortina Lateral", "fecha": "11 oct 2025", "asunto": "T1068 - Cortina lateral no sube - CV Cortinas", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "1059", "tkt": "6026012", "averia": "Cortina Lateral", "fecha": "17 ago 2025", "asunto": "T1059 ppto por cortinas laterales - cv cortinas - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "", "estado": "Falta Presupuesto"}, {"tienda": "1059", "tkt": "6245909", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 feb 2026", "asunto": "T1059 CAMBIO DEL SISTEMA DE ELEVACI√ìN CORTINA PRINCIPAL- cv cortinas - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "", "estado": "Falta Presupuesto"}, {"tienda": "1054", "tkt": "6101027", "averia": "Cortina Lateral", "fecha": "10 oct 2025", "asunto": "T1054 - CORTINA LATERAL NO FUNCIONA - CV Cortinas - en proceso", "entidad": "Cortinas Cv", "ppto1": "$1.250.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1054", "tkt": "6195257", "averia": "Cortina Lateral", "fecha": "23 dic 2025", "asunto": "T1054 - CORTINA LATERAL NO FUNCIONA - presupuesto ft net", "entidad": "Cortinas Cv", "ppto1": "$ 1.430.100,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1047", "tkt": "6201992", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "31 dic 2025", "asunto": "T1047 - CORTINA DEPOSITO DESCARRILADA - CROACIA - PPTO PEND", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "1047", "tkt": "6230237", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "23 ene 2026", "asunto": "1047 - CORTINA DEPOSITO DESCARRILADA - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "1047", "tkt": "6201975", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "30 dic 2025", "asunto": "T1047 Puerta de escape desoldada - CROACIA - PPTO PEND", "entidad": "Croacia Cortinas", "ppto1": "$482.400", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1045", "tkt": "6154620", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "19 nov 2025", "asunto": "T1045 No baja cortina de entrada - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$2.843.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1039", "tkt": "6233384", "averia": "Cerrajer√≠a", "fecha": "26 ene 2026", "asunto": "1039 - LLAVE ROTA DE PUERTA DE DEPOSITO - TEC INT", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "1038", "tkt": "6146878", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "13 nov 2025", "asunto": "1038 - CORTINA DEPOSITO DESCARRILADA - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$1.510.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1038", "tkt": "6209347", "averia": "Cortinas Mal Uso", "fecha": "6 ene 2026", "asunto": "T1038 cortina de deposito rota al bajar - PRS  - ppto pendiente", "entidad": "Prs", "ppto1": "$2.180.683,50", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1037", "tkt": "6227091", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "20 ene 2026", "asunto": "T1037 - Cortina metalica de deposito torcida - CV CORTINAS - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$2.117.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1036", "tkt": "6028194", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "19 ago 2025", "asunto": "T1036 Cortina de entrada trabada - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$1.128.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1032", "tkt": "6200844", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "30 dic 2025", "asunto": "T1032 -  Se solicita arreglo de cerradura de puerta de escape - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.550.000,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1024", "tkt": "6249008", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "8 feb 2026", "asunto": "T1024 - puerta de escape desoldada  en la uni√≥n del marco - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "1023", "tkt": "6204800", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "3 ene 2026", "asunto": "T1023 - Puerta de deposito trabada - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "1012", "tkt": "6116395", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "21 oct 2025", "asunto": "T1012 - Cortina trabada no sube - Croacia - POSPUESTO", "entidad": "Croacia Cortinas", "ppto1": "$1.068.480", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1012", "tkt": "6190465", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "19 dic 2025", "asunto": "T1012 - cortina de ingreso, cambio de motor - ppto pendiente - croacia", "entidad": "Croacia Cortinas", "ppto1": "$ 1.428.430", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "1012", "tkt": "6239487", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "31 ene 2026", "asunto": "T1012 - SE SOLICITA ASISTENCIA COMANDO NO RESPONDE - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$885.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "910", "tkt": "6242529", "averia": "Cdg", "fecha": "2 feb 2026", "asunto": "T910 - CDG solictado por Franco Amarilla - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "904", "tkt": "6245305", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "4 feb 2026", "asunto": "T904 PUERTA DE CORTINA DE ENTRADA BARRETEADA - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "824", "tkt": "6252189", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "10 feb 2026", "asunto": "T824 cerradura deposito desoldada - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "813", "tkt": "6193321", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "22 dic 2025", "asunto": "T813 - Se cay√≥ la persiana del deposito. Y se solt√≥ - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$544.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "777", "tkt": "6252752", "averia": "Cortinas Mal Uso", "fecha": "11 feb 2026", "asunto": "T777 - CORTINA SE TRABA AL SUBIR Y BAJAR - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "755", "tkt": "6248340", "averia": "Cambio De Cerradura De Tienda", "fecha": "7 feb 2026", "asunto": "Tda755 cambio de cerradura de puerta de entrada manual - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "755", "tkt": "6248397", "averia": "Cambio De Cerradura De Tienda", "fecha": "7 feb 2026", "asunto": "T755 arreglo de 2 brazos hidr√°ulicos en deposito - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "749", "tkt": "6239465", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "31 ene 2026", "asunto": "749 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - CROACIA - ppto pend", "entidad": "Croacia Cortinas", "ppto1": "$1.428.430", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "749", "tkt": "6252355", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "10 feb 2026", "asunto": "T749 -  CORTINA TRABADA NO BAJA - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "739", "tkt": "6162093", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "26 nov 2025", "asunto": "T739 - cortina falta mantenimiento por ruido - prs - PPTO CAMBIO DE GUIAS", "entidad": "Prs", "ppto1": "$4.017.796,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "723", "tkt": "6253420", "averia": "Cambio De Cerradura De Tienda", "fecha": "12 feb 2026", "asunto": "723 - Cerradura de puerta de escape trabada no permite el ingreso/egreso - prs", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "718", "tkt": "6243949", "averia": "Cambio De Cerradura De Tienda", "fecha": "3 feb 2026", "asunto": "T718 Cambio de cerradura y candados cambio de gestion - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "713", "tkt": "6249471", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "8 feb 2026", "asunto": "T713 - PUERTA ESCAPE CON CERRADURA TRABADA - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "703", "tkt": "6110127", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "16 oct 2025", "asunto": "T703 - Puerta de escape da√±ada - CROACIA - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$931.800", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "702", "tkt": "6166891", "averia": "Cerrajer√≠a", "fecha": "30 nov 2025", "asunto": "T702 - SE ROMPIO EL PICAPORTE DE LA PUERTA DE INGRESO AL PERSONAL - TEC INT", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "698", "tkt": "6243968", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "3 feb 2026", "asunto": "T.698 -por corte de luz no se puede bajar la persiana de entrada. - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "687", "tkt": "6116822", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "21 oct 2025", "asunto": "T687  la persiana empez√≥ a subir y luego se detuvo y no subio mas -CROACIA - ppto pendiente", "entidad": "Prs", "ppto1": "$2.292.600", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "687", "tkt": "6116386", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "21 oct 2025", "asunto": "T687  la persiana empez√≥ a subir y luego se detuvo y no subio mas - prs  - PPTO PENDIENTE", "entidad": "Prs", "ppto1": "$3.383.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "686", "tkt": "6229225", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "22 ene 2026", "asunto": "686 - CORTINA DEPOSITO AVERIADA POR ROBO - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "686", "tkt": "6248018", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "6 feb 2026", "asunto": "T686 - PUERTA DE ENTRADA - TECNICO INTERNO", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "647", "tkt": "6212688", "averia": "Cdg", "fecha": "9 ene 2026", "asunto": "T647 - Cambio de cerraduras externas por cambio de gestion para las 20 hs - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "644", "tkt": "6131968", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "2 nov 2025", "asunto": "T644 Cortina de entrada no sube/ Sin funcionar - prs - PPTO PENDIENTE", "entidad": "Prs", "ppto1": "$1.761.325,50", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "635", "tkt": "6252539", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "11 feb 2026", "asunto": "T635 - reparacion del ca√±o q protege el vidrio de la puerta de ingreso - SE PIDE INF", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "634", "tkt": "6249483", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "8 feb 2026", "asunto": "T634 - puerta de escape con cerradura rota - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "633", "tkt": "6245704", "averia": "Cortinas Mal Uso", "fecha": "5 feb 2026", "asunto": "T633 - PERSIANA SALIDA DE GUIA - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "630", "tkt": "6240081", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "31 ene 2026", "asunto": "T630 - llave que no cierra de entrada - Pendiente", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "626", "tkt": "6224575", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "18 ene 2026", "asunto": "T626 - Recmachar CERRADURA de puerta de entrada - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "608", "tkt": "6156016", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "20 nov 2025", "asunto": "T608 BAJAR CORTINA POR CORTO - CROACIA - ppto pend", "entidad": "Croacia Cortinas", "ppto1": "$408.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "591", "tkt": "6144116", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "11 nov 2025", "asunto": "t591 -  al subir la persiana se trabo y se salio del eje no puedo abrir la puerta - croacia -pendiente", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "589", "tkt": "6251753", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "10 feb 2026", "asunto": "T589 - puerta de acceso - SE PIDE INFO", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "563", "tkt": "6166699", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "30 nov 2025", "asunto": "563 -  al cierre se empez√≥ a bajar la cortina y de un lado se quedaba quieto - prs - ppto pendiente", "entidad": "Prs", "ppto1": "$628.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "560", "tkt": "6225118", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "19 ene 2026", "asunto": "T560 - manijon desoldado - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "549", "tkt": "6234706", "averia": "Cambio De Cerradura De Tienda", "fecha": "27 ene 2026", "asunto": "T549 - arreglo de CERRADURA BA√ëO CLIENTES - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "547", "tkt": "6251982", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "10 feb 2026", "asunto": "TDA547 PUERTA CAIDA TRABADA EN GUIA - se pide inf", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "505", "tkt": "6044237", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "29 ago 2025", "asunto": "T505 CORTINA SE TEABO NO BAJO - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.383.130", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "505", "tkt": "6040009", "averia": "Cortina Lateral", "fecha": "27 ago 2025", "asunto": "T505 -SOLICITUD DE REPARACI√ìN DE CORTINA POR RIESGO DE ACCIDENTE - CROACIA  - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.001.300", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "500", "tkt": "6253044", "averia": "Cortinas Mal Uso", "fecha": "11 feb 2026", "asunto": "T500 - persiana metalica se traba - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "498", "tkt": "6252408", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "11 feb 2026", "asunto": "498 - Partes desoldadas de la cortina - prs", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "489", "tkt": "6251823", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "10 feb 2026", "asunto": "T489 - pinches para fachada -  SE PIDE INFO", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "rechazado", "estado": "Solucionado"}, {"tienda": "470", "tkt": "6138863", "averia": "Cortina Lateral", "fecha": "6 nov 2025", "asunto": "T470 - no cierra la persiana  - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$819.465,20", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "452", "tkt": "6242121", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "2 feb 2026", "asunto": "T452 - Puerta de escape esta roto los agarre - croacia", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "451", "tkt": "6040072", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "27 ago 2025", "asunto": "T451 Persiana qued√≥ trabada arriba y no baja - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$1.258.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "446", "tkt": "6252741", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "11 feb 2026", "asunto": "t446 PUERTA DE ESCAPE NO CIERRA BIEN - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "438", "tkt": "6246964", "averia": "Cortina Lateral", "fecha": "6 feb 2026", "asunto": "T438 - Persiana vidriera lateral no sube - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "", "estado": "Sin Definir"}, {"tienda": "434", "tkt": "6251961", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "10 feb 2026", "asunto": "T434 CERRADURA TRABADA PUERTA INGRESO A LA TIENDA - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "", "estado": "Sin Definir"}, {"tienda": "434", "tkt": "6248179", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "7 feb 2026", "asunto": "T434 - cerradura trabada puerta corrediza de ingreso - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "431", "tkt": "6232529", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "25 ene 2026", "asunto": "431 - Motor de cortina no responde, cadena manual salida - PRS", "entidad": "Prs", "ppto1": "$1.445.721,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "429", "tkt": "6217954", "averia": "Cortina Lateral", "fecha": "13 ene 2026", "asunto": "T429 - cortina lateral rota - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "429", "tkt": "6215164", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "11 ene 2026", "asunto": "t429 reparacion de persiana entrada a la tienda - croacia - ppto pend", "entidad": "Croacia Cortinas", "ppto1": "$823.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "414", "tkt": "6180942", "averia": "Cortina Lateral", "fecha": "10 dic 2025", "asunto": "T414 - CORTINA LATERAL TRABADA - CAMBIO DE TABLILLAS- PRS - PPTO PENDIENTE", "entidad": "Prs", "ppto1": "$705.471,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "411", "tkt": "6245400", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 feb 2026", "asunto": "411 - , la cortina met√°lica, no sube, solo se escucha la vibraci√≥n pero no sube - croacia", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "407", "tkt": "6233489", "averia": "Cortina Lateral", "fecha": "26 ene 2026", "asunto": "t407 - cortina lateral no sube del todo - pendiente", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "384", "tkt": "6246755", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 feb 2026", "asunto": "T384 PERSIANA TRABADA NO BAJA - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "360", "tkt": "6173461", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 dic 2025", "asunto": "T360 - CORTINA TRABA IMPIDE APERTURA - CROACIA - ppto pend", "entidad": "Croacia Cortinas", "ppto1": "$868.900", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "360", "tkt": "6219079", "averia": "Cambio De Cerradura De Tienda", "fecha": "14 ene 2026", "asunto": "Tda 360 cambio de gesti√≥n - ilit", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "347", "tkt": "6221804", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "16 ene 2026", "asunto": "T347 puerta depo cerradura suelta - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "319", "tkt": "6249087", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "8 feb 2026", "asunto": "t319 picaporte roto de puerta de deposito - tec int", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "313", "tkt": "6142370", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "10 nov 2025", "asunto": "T313  el boton de la cortina al bajar y subir no registra ninguna orden - cv cortinas", "entidad": "Cortinas Cv", "ppto1": "$1.100.000", "ppto2": "$1.600.000", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "310", "tkt": "6090425", "averia": "Cortina Lateral", "fecha": "2 oct 2025", "asunto": "T310 Cortina lateral trabada no baja, ni sube - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.750.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "310", "tkt": "6209162", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "6 ene 2026", "asunto": "310 - SE SOLICITA ASISTENCIA CORTINA AVERIADA - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$3.069.000,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "303", "tkt": "6243424", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "3 feb 2026", "asunto": "t303 cerradura de puerta deposito trabada - tec int", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "303", "tkt": "6248465", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "7 feb 2026", "asunto": "T303 - CERRADURA PUERTA DEPOSITO/CALLE ROTA - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "293", "tkt": "6209146", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "6 ene 2026", "asunto": "T293 - INSTALACION DE CORTINAS en deposito - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "279", "tkt": "6250701", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "9 feb 2026", "asunto": "T279 - Puerta de escape desoldada - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "275", "tkt": "6251948", "averia": "Cortina Lateral", "fecha": "10 feb 2026", "asunto": "T275 - RELEVAR - La persiana del lateral al ingreso se encuentra trabada no baja - cv cortinas", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "275", "tkt": "6242778", "averia": "Cortina Lateral", "fecha": "3 feb 2026", "asunto": "T275 - La persiana del lateral al ingreso se encuentra trabada no baja - ilit - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "3,500,000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "271", "tkt": "6129593", "averia": "Cortina Lateral", "fecha": "30 oct 2025", "asunto": "T271 cortina met√°lica no baja - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.611.400", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "256", "tkt": "6211037", "averia": "Cortinas Mal Uso", "fecha": "7 ene 2026", "asunto": "T 256 CORTINA DE VIDRIERA TRABADA - CROACIA - falta ppto", "entidad": "Croacia Cortinas", "ppto1": "$1.483.300", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "254", "tkt": "6227881", "averia": "Cambio De Cerradura De Tienda", "fecha": "21 ene 2026", "asunto": "T254  Cerradura de la puerta de escape con remache suelto - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "251", "tkt": "6249304", "averia": "Cortina Lateral", "fecha": "8 feb 2026", "asunto": "t251 - bajar cortina lateral y ppto trabajo de arreglo - croacia", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "243", "tkt": "6113594", "averia": "Cambio De Cerradura De Tienda", "fecha": "18 oct 2025", "asunto": "T243 - Se solicita el arreglo de cerradura de puerta de deposito que da al exterior - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "243", "tkt": "6192893", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "21 dic 2025", "asunto": "T243 - persiana metalica de entrada a tienda rota - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$2.050.000,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "233", "tkt": "6222140", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "16 ene 2026", "asunto": "t233 - puerta corrediza con manija y cerradura salida - TEC INT", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "220", "tkt": "6224012", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "18 ene 2026", "asunto": "T220 - CORTINA FUNCIONA, FALTA EL AJUSTE DE LA PERILLA DEL AUTOMATICO - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "219", "tkt": "6241844", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "2 feb 2026", "asunto": "T219 - Arreglo de cerradura puerta de ingreso - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "205", "tkt": "6163259", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "27 nov 2025", "asunto": "T205 - Cortina met√°lica de ingreso no sube ni baja - CROACIA - ppto por tablillas pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.299.200", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "205", "tkt": "6115692", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "20 oct 2025", "asunto": "t205 La cortina met√°lica de ingreso a la tienda baja y sube escalonada y a los tirones- croacia - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.138.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "204", "tkt": "6245545", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 feb 2026", "asunto": "T204 - CORTINA DE INGRESO SALIDA DE LA VIA. IMPIDE CIERRE DE TIENDA - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "204", "tkt": "6227743", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "20 ene 2026", "asunto": "T204 -CORTINA LATERAL TRABDA IMPIDE CIERRE -  CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$2.050.000", "ppto2": "$950.000", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "198", "tkt": "6248815", "averia": "Cortinas Mal Uso", "fecha": "7 feb 2026", "asunto": "T198 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - Croacia", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "198", "tkt": "6174833", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "5 dic 2025", "asunto": "T198 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1.646.300", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "197", "tkt": "6091068", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "3 oct 2025", "asunto": "T197 PRESUPUESTAR ARREGLO DE CORTINA - CROACIA- PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$2.834.480", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "194", "tkt": "6162701", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "26 nov 2025", "asunto": "T194 - SE SOLICITA ASISTENCIA CORTINA AVERIADA NO BAJA  -  PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$1.569.096,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "194", "tkt": "6165611", "averia": "Cortina Lateral", "fecha": "29 nov 2025", "asunto": "T194 CORTINA LATERAL CAIDA - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$2.168.346,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "194", "tkt": "6223064", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "17 ene 2026", "asunto": "T194 - PUERTA CORREDIZA PESADA - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "194", "tkt": "6147909", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "14 nov 2025", "asunto": "T194 - Persiana de Ingreso trabada - PRS - PPTO PENDIENTE", "entidad": "Prs", "ppto1": "$1.569.096,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "187", "tkt": "6246461", "averia": "Cambio De Cerradura De Tienda", "fecha": "5 feb 2026", "asunto": "T187 - Arreglo de cerradura salida de emergencia - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "182", "tkt": "6171257", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "3 dic 2025", "asunto": "T182 - Cortina no llega hasta arriba - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "182", "tkt": "6247464", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "6 feb 2026", "asunto": "Tda 182 cortina de ingreso trabada - croacia", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "182", "tkt": "6230226", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "23 ene 2026", "asunto": "T182 - Persiana no baja hasta lo ultimo- ppto pendiente de instalacion llave inversora - croacia", "entidad": "Croacia Cortinas", "ppto1": "$382.980", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "179", "tkt": "6158923", "averia": "Cortina Lateral", "fecha": "24 nov 2025", "asunto": "T179 - Cortina se pudo subir con ruido pero NO corta arriba por lo que se enrolla  - prs - ppto pendiente", "entidad": "Prs", "ppto1": "$849.996.00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "179", "tkt": "6233991", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "26 ene 2026", "asunto": "t179 reparacion de 1 zocalo de la persiana - pendiente", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "165", "tkt": "6252347", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "10 feb 2026", "asunto": "T165 TIENDA SIN SUMINISTRO BAJAR CORTINA - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "165", "tkt": "6206338", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "4 ene 2026", "asunto": "T165 - COMANDO DE CORTINA NO RESPONDE - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "160", "tkt": "6135883", "averia": "Cambio De Cerradura De Tienda", "fecha": "4 nov 2025", "asunto": "T160 Cambio cerradura puerta entrada y puerta de persiana   cambio de gestion - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$950.000", "ppto2": "$1.450.000", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "151", "tkt": "6203623", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "2 ene 2026", "asunto": "T151 - Esta rota la cerradura - CV CORTINAS - ppto pendiente", "entidad": "Cortinas Cv", "ppto1": "$1.150.000", "ppto2": "$1.500.000", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "145", "tkt": "6187508", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "16 dic 2025", "asunto": "145 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$670.221,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "143", "tkt": "6215142", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "11 ene 2026", "asunto": "t143 - cerradura de puerta de deposito trabada - ilit", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "142", "tkt": "6009750", "averia": "Cortina Lateral", "fecha": "5 ago 2025", "asunto": "T142 Cortina lateral - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$282.980 C/U", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "134", "tkt": "6242761", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "3 feb 2026", "asunto": "T134 - Arreglo de manija de puerta de entrada - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "133", "tkt": "6244772", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "4 feb 2026", "asunto": "T133 - CERRADURA PUERTA DE ESCAPE ROTA - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "128", "tkt": "6221078", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "15 ene 2026", "asunto": "T128 - Cerradura trabada - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "128", "tkt": "6252341", "averia": "Cortinas Mal Uso", "fecha": "10 feb 2026", "asunto": "T128 No baja la persiana de la puerta de cierre -  CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "128", "tkt": "6139208", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "7 nov 2025", "asunto": "T128 - CORTINA GOLPEADA Y INCLINADA NO BAJA - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$614.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "126", "tkt": "6249748", "averia": "Cortinas Mal Uso", "fecha": "8 feb 2026", "asunto": "T126 - cortina metalica trabada impide cierre - CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "123", "tkt": "6005541", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "2 ago 2025", "asunto": "T123 Cortina principal se traba al subir y bajar - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$2.007.700", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "111", "tkt": "6052909", "averia": "Cortina Lateral", "fecha": "4 sept 2025", "asunto": "T111 - CORTINA SIN FUNCIONAR - PRS - PPTO PENDIENTE", "entidad": "Prs", "ppto1": "$2.219.950,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "99", "tkt": "6104545", "averia": "Cortina Lateral", "fecha": "12 oct 2025", "asunto": "T99 CORTINA NO BAJA CORRECTAMENTE - CV CORTINAS - pendiente ppto", "entidad": "Cortinas Cv", "ppto1": "$1.032.000", "ppto2": "$1.504.000", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "78", "tkt": "6234645", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "27 ene 2026", "asunto": "T78 - Cerradura rota puerta principal - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "76", "tkt": "6245523", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "5 feb 2026", "asunto": "76 - Puerta manual de entrada cuesta abrir y cerrar - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "74", "tkt": "6088821", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "2 oct 2025", "asunto": "74 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - croacia -PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$689.700", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "74", "tkt": "6169187", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "1 dic 2025", "asunto": "T74 - soldar la traba de la puerta de escape - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$813.700", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "70", "tkt": "6239428", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "30 ene 2026", "asunto": "T70 COTINA TRABADA  NO BAJA - CROACIA - en gestion", "entidad": "Croacia Cortinas", "ppto1": "$1.375.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "67", "tkt": "6217578", "averia": "Cortina Lateral", "fecha": "12 ene 2026", "asunto": "T67 - Cortina lateral trabada, falta automatico - pendiente ppto", "entidad": "Croacia Cortinas", "ppto1": "$445.000", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "66", "tkt": "6241188", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "2 feb 2026", "asunto": "t66 - la cerradura de la puerta de escape se rompio los remaches que la sostienes - cv cortinas", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "64", "tkt": "6253354", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "11 feb 2026", "asunto": "T64 - CORTINA ATASCADA NO BAJA - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta presupuesto", "estado": "Falta Presupuesto"}, {"tienda": "64", "tkt": "6253791", "averia": "Cambio De Cerradura De Tienda", "fecha": "12 feb 2026", "asunto": "64 - CERRADURA AVERIADA", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "62", "tkt": "6235803", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "28 ene 2026", "asunto": "T62 - CORTINA DE INGRESO SALIDA DEL CARRIL, NO PUEDEN BAJARLA - CROACIA - ppto pend", "entidad": "Croacia Cortinas", "ppto1": "$412.890", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "57", "tkt": "6166847", "averia": "Cortina Lateral", "fecha": "30 nov 2025", "asunto": "T57 CORTINA LATERAL SE TRABA AL BAJAR - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$1.022.721,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "55", "tkt": "6116348", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "21 oct 2025", "asunto": "T55 - no sube la cortina, no se puede recibir el camion- croacia  - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$1,228.430", "ppto2": "$1.380.500", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "54", "tkt": "6126807", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "28 oct 2025", "asunto": "T54 CORTINA NO BAJA -  CROACIA - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$2.133.900", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "54", "tkt": "6127092", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "29 oct 2025", "asunto": "T54 CORTINA NO BAJA - CV CORTINAS  - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$1.450.000", "ppto2": "$1.650.000", "notas": "2 presupuestos", "estado": "Con Presupuesto"}, {"tienda": "49", "tkt": "6109213", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "15 oct 2025", "asunto": "T49 - Pasadores de puerda de escape desoldados - PRS -PPTO PENDIENTE", "entidad": "Prs", "ppto1": "$2.558.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "47", "tkt": "6231204", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "23 ene 2026", "asunto": "T47 - CERRADURA DEPOSITO/CALLE ROTA - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "44", "tkt": "6243957", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "3 feb 2026", "asunto": "T44 Cortina trabada no puede cerrar -  CROACIA", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "41", "tkt": "6219662", "averia": "Cortina Lateral", "fecha": "14 ene 2026", "asunto": "T41 - Cortina LATERAL se baja sola - CROACIA - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "40", "tkt": "6200772", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "30 dic 2025", "asunto": "TD40 no sube cortina principal - CROACIA - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$885.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "36", "tkt": "6245938", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "5 feb 2026", "asunto": "TDA36 PUERTA ENTRADA CAIDA Y TRABAJA DE GUIA OBSTACULIZA A CLIENTES PARA INGRESAR - SE PIDE INFO", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "33", "tkt": "6234473", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "26 ene 2026", "asunto": "T33 - Cerradura de deposito suelta - ILIT", "entidad": "Ilit", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "32", "tkt": "6162698", "averia": "Cortina Lateral", "fecha": "26 nov 2025", "asunto": "T32 Cortina fuera del eje - CROACIA - ppto cambiar el z√≥calo, pendiente", "entidad": "Croacia Cortinas", "ppto1": "$926.880", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "27", "tkt": "6117671", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "22 oct 2025", "asunto": "27 - SE SOLICITA ASISTENCIA CORTINA ATASCADA - croacia - PPTO PENDIENTE", "entidad": "Croacia Cortinas", "ppto1": "$2.733.880", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "24", "tkt": "6221039", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "15 ene 2026", "asunto": "T24 Cerradura de puerta corrediza trabada - Pendiente", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "23", "tkt": "6249945", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "9 feb 2026", "asunto": "t23 - La cortina dejo de funcionar en la mitad de la subida - croacia", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "21", "tkt": "6253450", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "12 feb 2026", "asunto": "t21 - cortina de ingreso se traba - croacia", "entidad": "Croacia Cortinas", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "21", "tkt": "6220260", "averia": "Cambio De Cerradura De Tienda", "fecha": "15 ene 2026", "asunto": "21 - CERRADURA AVERIADA DE PUERTA DEPO - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "20", "tkt": "6248103", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "6 feb 2026", "asunto": "T20 - cortinero para bajar la persiana del local ppor falta de suministro - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "16", "tkt": "6044716", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "30 ago 2025", "asunto": "T16 - Cortina no baja en su totalidad - PRS - ppto pendiente", "entidad": "Prs", "ppto1": "$1.058.500,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "14", "tkt": "6199025", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "28 dic 2025", "asunto": "T14 - Bisagra de puerta de escape rota - CV CORTINAS", "entidad": "Cortinas Cv", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "11", "tkt": "6201940", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "30 dic 2025", "asunto": "t11 - cortina con cadena, se debe arreglar el automatico - croacia - ppto pendiente", "entidad": "Croacia Cortinas", "ppto1": "$442.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "9", "tkt": "6228463", "averia": "Cerradura Trabada / Puerta De Ingreso", "fecha": "21 ene 2026", "asunto": "T9 - cerradura de puerta corrediza rota, no ingresa llave - pendiente", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}, {"tienda": "6", "tkt": "6248116", "averia": "Cambio De Cerradura De Tienda", "fecha": "7 feb 2026", "asunto": "T6 - Cerradura trabada no permite el ingreso/egreso - PRS", "entidad": "Prs", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "6", "tkt": "6184024", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "12 dic 2025", "asunto": "T6  CORTINA TRABADA IMPIDE CIERE - PRS - cambio tablillas - ppto pendiente", "entidad": "Prs", "ppto1": "$1.157.846,00", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "5", "tkt": "6100761", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "9 oct 2025", "asunto": "T5 CORTINA PRINCIPAL TRABA NO BAJA - CROACIA - ppto pend", "entidad": "Croacia Cortinas", "ppto1": "$256.500", "ppto2": "-", "notas": "1 presupuesto", "estado": "Con Presupuesto"}, {"tienda": "4", "tkt": "6244202", "averia": "Reparaci√≥n Cortina Dep√≥sito", "fecha": "4 feb 2026", "asunto": "T4. PORTON DEL DEPOSITO NO CIERRA - Tec interno", "entidad": "Tecnico Interno", "ppto1": "-", "ppto2": "-", "notas": "solucionado", "estado": "Solucionado"}, {"tienda": "3", "tkt": "6235485", "averia": "Cortina Que Impida La Apertura O Cierre", "fecha": "27 ene 2026", "asunto": "T3 CORTINA DE INGRESO NO HACE TOPE CON EL PISO - PENDIENTE", "entidad": "-", "ppto1": "-", "ppto2": "-", "notas": "falta remito", "estado": "Falta Remito"}];

// ‚îÄ‚îÄ TABS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function switchTab(tab, btn) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('tab-dashboard').style.display   = tab === 'dashboard'   ? '' : 'none';
  document.getElementById('tab-proveedores').style.display = tab === 'proveedores' ? '' : 'none';
  document.getElementById('tab-buscar').style.display      = tab === 'buscar'      ? '' : 'none';
  if (tab === 'proveedores') renderProveedores();
  if (tab === 'buscar') setTimeout(()=>document.getElementById('s-tienda').focus(), 100);
}

// ‚îÄ‚îÄ PROVEEDORES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let activeProvFilter = 'all';
let selectedProv = null;

function renderProveedores() {
  // Contar tickets por proveedor
  const provMap = {};
  tickets.forEach(t => {
    const p = t.entidad || '-';
    if (!provMap[p]) provMap[p] = [];
    provMap[p].push(t);
  });

  const sorted = Object.entries(provMap).sort((a,b) => b[1].length - a[1].length);

  // Colors per proveedor
  const pcolors = ['var(--lav)', 'var(--sage)', 'var(--sky)', 'var(--peach)', 'var(--blush)', 'var(--mint)', 'var(--rose, #C49AB0)'];

  document.getElementById('prov-selector').innerHTML = sorted.map(([p, tkts], i) => {
    const ec = {};
    tkts.forEach(t => ec[t.estado] = (ec[t.estado]||0)+1);
    const pending = (ec['Falta Presupuesto']||0) + (ec['Falta Remito']||0);
    return `<div class="prov-card${selectedProv===p?' active':''}" onclick="selectProv('${p.replace(/'/g,"\'")}')">
      <div class="prov-card-name">${p}</div>
      <div class="prov-card-count" style="color:${pcolors[i%pcolors.length]}">${tkts.length}</div>
      <div class="prov-card-sub">tickets${pending > 0 ? ` ¬∑ <span style="color:var(--blush-d);font-weight:700">${pending} pendientes</span>` : ''}</div>
    </div>`;
  }).join('');

  if (selectedProv) selectProv(selectedProv);
}

function selectProv(prov) {
  selectedProv = prov;
  activeProvFilter = 'all';
  document.querySelectorAll('.prov-card').forEach(c => c.classList.remove('active'));
  document.querySelectorAll('.prov-card').forEach(c => {
    if (c.querySelector('.prov-card-name').textContent === prov) c.classList.add('active');
  });

  const provTickets = tickets.filter(t => (t.entidad||'-') === prov);
  const ec = {};
  provTickets.forEach(t => ec[t.estado] = (ec[t.estado]||0)+1);

  // Stats
  document.getElementById('ps-total').textContent     = provTickets.length;
  document.getElementById('ps-ppto').textContent      = ec['Con Presupuesto']||0;
  document.getElementById('ps-faltappto').textContent = ec['Falta Presupuesto']||0;
  document.getElementById('ps-remito').textContent    = ec['Falta Remito']||0;
  document.getElementById('ps-sol').textContent       = ec['Solucionado']||0;
  document.getElementById('prov-stats').style.display = 'grid';
  document.getElementById('prov-table-wrap').style.display = 'block';
  document.getElementById('prov-table-title').textContent = `${provTickets.length} tickets ‚Äî ${prov}`;

  // Estado filter pills
  const estados = ['all','Con Presupuesto','Falta Presupuesto','Falta Remito','Solucionado','En Proceso','Sin Definir'];
  document.getElementById('prov-estado-pills').innerHTML = estados.map(e => {
    const c = e==='all' ? provTickets.length : ec[e]||0;
    if (e!=='all' && c===0) return '';
    const label = {all:'Todos','Con Presupuesto':'Con PPTO','Falta Presupuesto':'Falta PPTO','Falta Remito':'Falta Remito','Solucionado':'Solucionado','En Proceso':'En Proceso','Sin Definir':'Sin estado'}[e]||e;
    return `<div class="epill${activeProvFilter===e?' active':''}" onclick="filterProvEstado('${e}','${prov.replace(/'/g,"\'")}')">
      ${label} (${c})
    </div>`;
  }).join('');

  renderProvTable(prov, provTickets);
}

function filterProvEstado(estado, prov) {
  activeProvFilter = estado;
  const provTickets = tickets.filter(t => (t.entidad||'-') === prov);
  // Refresh pills
  selectProv(prov);
  activeProvFilter = estado;
  // Re-render pills with new active state
  const ec = {};
  provTickets.forEach(t => ec[t.estado] = (ec[t.estado]||0)+1);
  const estados = ['all','Con Presupuesto','Falta Presupuesto','Falta Remito','Solucionado','En Proceso','Sin Definir'];
  document.getElementById('prov-estado-pills').innerHTML = estados.map(e => {
    const c = e==='all' ? provTickets.length : ec[e]||0;
    if (e!=='all' && c===0) return '';
    const label = {all:'Todos','Con Presupuesto':'Con PPTO','Falta Presupuesto':'Falta PPTO','Falta Remito':'Falta Remito','Solucionado':'Solucionado','En Proceso':'En Proceso','Sin Definir':'Sin estado'}[e]||e;
    return `<div class="epill${activeProvFilter===e?' active':''}" onclick="filterProvEstado('${e}','${prov.replace(/'/g,"\'")}')">
      ${label} (${c})
    </div>`;
  }).join('');

  const filtered = estado==='all' ? provTickets : provTickets.filter(t => t.estado===estado);
  renderProvTable(prov, filtered);
}

function renderProvTable(prov, provTickets) {
  const filtered = activeProvFilter==='all' ? provTickets : provTickets.filter(t => t.estado===activeProvFilter);
  const s = ESTADO_STYLES;
  const TKT_BASE = 'https://dia.cloud.invgate.net/requests/show/index/id/';
  document.getElementById('prov-tbl-body').innerHTML = !filtered.length
    ? '<tr><td colspan="8"><div class="empty"><div class="ei">üìã</div>Sin tickets</div></td></tr>'
    : filtered.map(t => {
        const es = s[t.estado] || {bg:'#F5F5F8', color:'#505068', border:'#AAAACC'};
        return `<tr>
          <td class="td-tkt"><a href="${TKT_BASE}${t.tkt}" target="_blank" style="color:var(--lav-d);font-weight:700;font-family:'DM Mono',monospace;text-decoration:none" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">#${t.tkt}</a></td>
          <td style="font-weight:700;color:var(--sage-d)">T${t.tienda}</td>
          <td style="font-size:.67rem;color:var(--muted);max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap" title="${t.averia}">${t.averia}</td>
          <td style="color:var(--muted);white-space:nowrap;font-size:.68rem">${t.fecha}</td>
          <td style="font-family:'DM Mono',monospace;font-size:.68rem;color:var(--mint-d)">${t.ppto1||'-'}</td>
          <td style="font-family:'DM Mono',monospace;font-size:.68rem;color:var(--mint-d)">${t.ppto2||'-'}</td>
          <td style="font-size:.67rem;color:var(--muted)">${t.notas||'-'}</td>
          <td><span class="tag" style="background:${es.bg};color:${es.color};border:1px solid ${es.border}">${t.estado}</span></td>
        </tr>`;
      }).join('');
}



// ‚îÄ‚îÄ REFRESH FROM SHEETS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const SHEET_CSV = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT6FXjJlRW4L7SeLP3v7SxsY75YWS0x-wAlhSmV0ez5Pm_ylDpuueSidpHzFOSY52U_zNVt7YV-eJZZ/pub?gid=424601211&single=true&output=csv';

function parseCSV(text) {
  const rows = []; let row = []; let cell = ''; let inQ = false;
  for (let i=0; i<text.length; i++) {
    const c = text[i];
    if (c==='"') { if (inQ && text[i+1]==='"') { cell+='"'; i++; } else inQ=!inQ; }
    else if (c===',' && !inQ) { row.push(cell); cell=''; }
    else if ((c==='\n'||c==='\r') && !inQ) { if(c==='\r'&&text[i+1]==='\n')i++; row.push(cell); rows.push(row); row=[]; cell=''; }
    else cell+=c;
  }
  if(cell||row.length){ row.push(cell); rows.push(row); }
  return rows;
}

async function refreshFromSheets() {
  const btn = document.getElementById('btn-refresh');
  btn.textContent = '‚è≥ Cargando‚Ä¶';
  btn.disabled = true;
  try {
    const resp = await fetch(SHEET_CSV + '&t=' + Date.now());
    if (!resp.ok) throw new Error('HTTP ' + resp.status);
    const csv = await resp.text();
    const rows = parseCSV(csv);
    if (rows.length < 2) throw new Error('Sin datos');
    const headers = rows[0].map(h => h.trim());
    const norm = s => s.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
    const find = (obj, ...keys) => {
      for (const k of keys) {
        if (obj[k] !== undefined) return (obj[k]||'').toString().trim();
        const match = headers.find(h => norm(h).includes(norm(k)));
        if (match && obj[match] !== undefined) return (obj[match]||'').toString().trim();
      }
      return '';
    };
    const imported = rows.slice(1).filter(r=>r.some(c=>c)).map(row => {
      const obj = {};
      headers.forEach((h,i) => obj[h] = row[i]||'');
      const t = {
        tkt:    find(obj,'TKT','ticket').replace(/\.0$/,''),
        tienda: find(obj,'Tienda','store').replace(/\.0$/,''),
        averia: find(obj,'Aver√≠a','Averia','averia','categoria'),
        fecha:  find(obj,'Fecha_Solicitud','Fecha','fecha'),
        asunto: find(obj,'Asunto','asunto'),
        entidad:find(obj,'Entidades externas','Entidades','entidad') || '-',
        ppto1:  find(obj,'1 ppto','ppto1') || '-',
        ppto2:  find(obj,'2 ppto','ppto2') || '-',
        notas:  find(obj,'Notas','notas'),
      };
      // Calcular estado
      const n = t.notas.toLowerCase(), a = t.asunto.toLowerCase();
      const p1ok = t.ppto1 && t.ppto1!=='-' && t.ppto1!=='nan' && t.ppto1!=='';
      const p2ok = t.ppto2 && t.ppto2!=='-' && t.ppto2!=='nan' && t.ppto2!=='';
      if (/solucionado|rechazado/.test(n)) t.estado='Solucionado';
      else if (/falta remito/.test(n)) t.estado='Falta Remito';
      else if (/falta presupuesto/.test(n)||(/ppto/.test(a)&&!(p1ok||p2ok)&&!/solucionado/.test(n))) t.estado='Falta Presupuesto';
      else if (p1ok||p2ok) t.estado='Con Presupuesto';
      else if (/proceso|pendiente/.test(n)) t.estado='En Proceso';
      else t.estado='Sin Definir';
      return t;
    }).filter(t => t.tkt);

    // Mantener tickets locales que no est√©n en el Sheet
    const sheetTkts = new Set(imported.map(t=>t.tkt));
    const localOnly = tickets.filter(t => t._local && !sheetTkts.has(t.tkt));
    tickets = [...imported, ...localOnly];
    save();
    render();
    toast(`‚úÖ ${imported.length} tickets actualizados desde Sheets`);
    btn.textContent = '‚Üª Actualizar desde Sheets';
    btn.disabled = false;
  } catch(e) {
    toast('‚ùå Error al conectar con Sheets. Revis√° tu conexi√≥n.', true);
    btn.textContent = '‚Üª Actualizar desde Sheets';
    btn.disabled = false;
  }
}


// ‚îÄ‚îÄ BUSCAR TIENDA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function buscarTienda() {
  const val = document.getElementById('s-tienda').value.trim();
  const result = document.getElementById('buscar-result');
  const tbl = document.getElementById('buscar-table');
  const tbody = document.getElementById('buscar-body');
  const count = document.getElementById('buscar-count');

  if (!val) { result.textContent = ''; tbl.style.display='none'; return; }

  const found = tickets.filter(t => String(t.tienda).includes(val));

  if (!found.length) {
    result.textContent = 'No se encontraron tickets para esa tienda';
    tbl.style.display = 'none';
    return;
  }

  result.textContent = '';
  tbl.style.display = 'block';
  count.textContent = `${found.length} ticket${found.length!==1?'s':''} ¬∑ Tienda ${val}`;

  const s = ESTADO_STYLES;
  tbody.innerHTML = found.map(t => {
    const es = s[t.estado] || {bg:'#F5F5F8', color:'#505068', border:'#AAAACC'};
    return `<tr>
      <td class="td-tkt"><a href="https://dia.cloud.invgate.net/requests/show/index/id/${t.tkt}" target="_blank" style="color:var(--lav-d);font-weight:700;font-family:'DM Mono',monospace;text-decoration:none" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">#${t.tkt}</a></td>
      <td style="font-size:.68rem;color:var(--muted);max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap" title="${t.averia}">${t.averia}</td>
      <td style="color:var(--muted);white-space:nowrap;font-size:.68rem">${t.fecha}</td>
      <td style="font-size:.7rem">${t.entidad}</td>
      <td style="font-family:'DM Mono',monospace;font-size:.68rem;color:var(--sage-d)">${t.ppto1||'-'}</td>
      <td style="font-family:'DM Mono',monospace;font-size:.68rem;color:var(--sage-d)">${t.ppto2||'-'}</td>
      <td style="font-size:.68rem;color:var(--muted)">${t.notas||'-'}</td>
      <td><span class="tag" style="background:${es.bg};color:${es.color};border:1px solid ${es.border}">${t.estado}</span></td>
    </tr>`;
  }).join('');
}

function applyFilters(){renderTable();}
loadData();
render();
</script>
</body>
</html>
